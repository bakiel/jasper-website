(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[760],{5928:function(e,s,t){Promise.resolve().then(t.bind(t,7274))},8420:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9205).Z)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},1047:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9205).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},875:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9205).Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},2135:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9205).Z)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]])},9322:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9205).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},2934:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9205).Z)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},1723:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9205).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},2735:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9205).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},2208:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9205).Z)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},740:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9205).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},9801:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9205).Z)("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]])},9397:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9205).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},4743:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9205).Z)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])},7274:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return F}});var a=t(7437),l=t(2265),n=t(7648),r=t(1605),i=t(2934),c=t(9322),d=t(1723),o=t(8736),u=t(3247),x=t(740),m=t(2135),p=t(875),h=t(2735),j=t(9397),b=t(1047),v=t(5252),N=t(2489),y=t(4743),g=t(2208);let f=(0,t(9205).Z)("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);var w=t(8420),_=t(2051),C=t(1817),Z=t(3448),k=t(6764),S=t(5359),D=t(9827),A=t(5367),M=t(1235);let I=[{value:"",label:"All Status"},{value:"draft",label:"Draft"},{value:"sent",label:"Sent"},{value:"viewed",label:"Viewed"},{value:"paid",label:"Paid"},{value:"overdue",label:"Overdue"}],T=[{value:"deposit",label:"Deposit Invoice (50%)"},{value:"progress",label:"Progress Invoice"},{value:"final",label:"Final Invoice"},{value:"full",label:"Full Payment Invoice"}],z={company_id:"",project_id:"",invoice_type:"deposit",currency:"ZAR",issue_date:new Date().toISOString().split("T")[0],due_date:new Date(Date.now()+12096e5).toISOString().split("T")[0],tax_percent:15,discount_percent:0,notes:"",line_items:[{description:"",quantity:1,unit_price:0,amount:0}]};function F(){let[e,s]=(0,l.useState)(""),[t,F]=(0,l.useState)(""),[R,q]=(0,l.useState)(1),[G,L]=(0,l.useState)(!1),[U,E]=(0,l.useState)(""),[O,B]=(0,l.useState)(""),[V,H]=(0,l.useState)(""),[Y,Q]=(0,l.useState)(""),[J,K]=(0,l.useState)(!1),[W,X]=(0,l.useState)(!1),[$,ee]=(0,l.useState)(null),[es,et]=(0,l.useState)(!1),[ea,el]=(0,l.useState)(z),[en,er]=(0,l.useState)(new Set),[ei,ec]=(0,l.useState)(!1),ed=(0,D.NL)(),{data:eo,isLoading:eu,error:ex}=(0,k.qx)({page:R,page_size:20,status:t||void 0}),{data:em}=(0,k.JE)({page:1,page_size:100}),{data:ep}=(0,k.Z0)({page:1,page_size:100}),eh=(null==eo?void 0:eo.invoices)||[],ej=(null==eo?void 0:eo.total)||0,eb=(null==em?void 0:em.companies)||[],ev=(null==ep?void 0:ep.projects)||[],eN=ea.company_id?ev.filter(e=>e.company_id===ea.company_id):ev,ey=()=>{let e=ea.line_items.reduce((e,s)=>e+s.amount,0),s=e*ea.discount_percent/100,t=e-s,a=t*ea.tax_percent/100;return{subtotal:e,discountAmount:s,taxAmount:a,total:t+a}},eg=e=>{let{name:s,value:t}=e.target;el(e=>({...e,[s]:"company_id"===s||"project_id"===s||"tax_percent"===s||"discount_percent"===s?""===t?"":Number(t):t})),"company_id"===s&&el(e=>({...e,project_id:""}))},ef=(e,s,t)=>{el(a=>{let l=[...a.line_items];return l[e]={...l[e],[s]:"description"===s?t:Number(t)},("quantity"===s||"unit_price"===s)&&(l[e].amount=l[e].quantity*l[e].unit_price),{...a,line_items:l}})},ew=e=>{ea.line_items.length>1&&el(s=>({...s,line_items:s.line_items.filter((s,t)=>t!==e)}))},e_=async e=>{e.preventDefault(),X(!0),ee(null),et(!1);try{if(!ea.company_id)throw Error("Please select a client");let e=ey(),s={company_id:ea.company_id,project_id:ea.project_id||void 0,invoice_type:ea.invoice_type,currency:ea.currency,issue_date:ea.issue_date,due_date:ea.due_date,subtotal:e.subtotal,tax_percent:ea.tax_percent,tax_amount:e.taxAmount,discount_percent:ea.discount_percent,discount_amount:e.discountAmount,total:e.total,notes:ea.notes||void 0,line_items:ea.line_items.filter(e=>e.description&&e.amount>0),status:"draft"};await S.iR.create(s),et(!0),ed.invalidateQueries({queryKey:["invoices"]}),setTimeout(()=>{K(!1),el(z),et(!1)},1500)}catch(e){ee(e.message||"Failed to create invoice")}finally{X(!1)}},eC=()=>{K(!1),el(z),ee(null),et(!1)},eZ=(0,l.useMemo)(()=>{let e=eh.reduce((e,s)=>e+s.total,0);return{total_invoiced:e,total_paid:eh.filter(e=>"paid"===e.status).reduce((e,s)=>e+s.total,0),total_pending:eh.filter(e=>"sent"===e.status||"viewed"===e.status).reduce((e,s)=>e+s.total,0),total_overdue:eh.filter(e=>"overdue"===e.status).reduce((e,s)=>e+s.total,0)}},[eh]),ek=(0,l.useMemo)(()=>eh.filter(s=>{if(e&&!s.invoice_number.toLowerCase().includes(e.toLowerCase())||U&&new Date(s.issue_date)<new Date(U))return!1;if(O){let e=new Date(s.issue_date),t=new Date(O);if(t.setHours(23,59,59,999),e>t)return!1}return(""===V||!(s.total<V))&&(""===Y||!(s.total>Y))}),[eh,e,U,O,V,Y]),eS=U||O||""!==V||""!==Y,eD=e=>{if(null==e)return"";let s=String(e);return["=","+","-","@","	","\r","\n"].some(e=>s.startsWith(e))&&(s="'"+s),s=s.replace(/"/g,'""')},eA=e=>{switch(e){case"paid":return(0,a.jsx)(i.Z,{className:"w-4 h-4 text-status-success"});case"overdue":return(0,a.jsx)(c.Z,{className:"w-4 h-4 text-status-error"});case"sent":case"viewed":return(0,a.jsx)(d.Z,{className:"w-4 h-4 text-status-warning"});default:return(0,a.jsx)(o.Z,{className:"w-4 h-4 text-jasper-slate"})}},eM=e=>{let s=new Set(en);s.has(e)?s.delete(e):s.add(e),er(s)},eI=ek.length>0&&en.size===ek.length,eT=en.size>0&&en.size<ek.length;return(0,a.jsxs)("div",{className:"min-h-screen bg-surface-secondary",children:[(0,a.jsx)(r.h4,{title:"Invoices",subtitle:"Manage and track all your invoices"}),(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsx)(P,{title:"Total Invoiced",value:(0,Z.xG)(eZ.total_invoiced,"USD"),icon:o.Z,color:"blue"}),(0,a.jsx)(P,{title:"Paid",value:(0,Z.xG)(eZ.total_paid,"USD"),icon:i.Z,color:"green"}),(0,a.jsx)(P,{title:"Pending",value:(0,Z.xG)(eZ.total_pending,"USD"),icon:d.Z,color:"amber"}),(0,a.jsx)(P,{title:"Overdue",value:(0,Z.xG)(eZ.total_overdue,"USD"),icon:c.Z,color:"red"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-between",children:[(0,a.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(u.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-jasper-slate-light"}),(0,a.jsx)("input",{type:"text",placeholder:"Search invoices...",value:e,onChange:e=>s(e.target.value),className:"input pl-10 w-64"})]}),(0,a.jsx)("select",{value:t,onChange:e=>F(e.target.value),className:"input w-40",children:I.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,a.jsxs)("button",{onClick:()=>L(!G),className:(0,Z.cn)("btn-secondary flex items-center gap-2",eS&&"border-jasper-emerald text-jasper-emerald"),children:[(0,a.jsx)(x.Z,{className:"w-4 h-4"}),"Filters",eS&&(0,a.jsx)("span",{className:"w-5 h-5 bg-jasper-emerald text-white text-xs rounded-full flex items-center justify-center",children:[U,O,""!==V?1:0,""!==Y?1:0].filter(Boolean).length}),G?(0,a.jsx)(m.Z,{className:"w-4 h-4"}):(0,a.jsx)(p.Z,{className:"w-4 h-4"})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("button",{onClick:()=>{let e=new Blob([["Invoice Number,Type,Status,Issue Date,Due Date,Paid Date,Subtotal,Discount %,Discount Amount,Tax %,Tax Amount,Total,Currency,Payment Method,Payment Reference,Notes",...ek.map(e=>[eD(e.invoice_number),eD(e.invoice_type),eD(e.status),eD((0,Z.p6)(e.issue_date)),eD((0,Z.p6)(e.due_date)),eD(e.paid_date?(0,Z.p6)(e.paid_date):""),eD(e.subtotal.toFixed(2)),eD(e.discount_percent.toString()),eD(e.discount_amount.toFixed(2)),eD(e.tax_percent.toString()),eD(e.tax_amount.toFixed(2)),eD(e.total.toFixed(2)),eD(e.currency),eD(e.payment_method),eD(e.payment_reference),eD(e.notes)]).map(e=>e.map(e=>'"'.concat(e,'"')).join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),s=document.createElement("a"),t=URL.createObjectURL(e);s.setAttribute("href",t),s.setAttribute("download","invoices_export_".concat(new Date().toISOString().split("T")[0],".csv")),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s)},disabled:0===ek.length,className:"btn-secondary",title:"Export filtered invoices to CSV",children:[(0,a.jsx)(h.Z,{className:"w-4 h-4"}),"Export CSV"]}),(0,a.jsxs)("button",{className:"btn-primary",onClick:()=>K(!0),children:[(0,a.jsx)(j.Z,{className:"w-4 h-4"}),"New Invoice"]})]})]}),G&&(0,a.jsxs)("div",{className:"card p-4",children:[(0,a.jsxs)("div",{className:"flex flex-wrap gap-6 items-end",children:[(0,a.jsxs)("div",{className:"flex gap-3 items-end",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"input-label flex items-center gap-1",children:[(0,a.jsx)(b.Z,{className:"w-3 h-3"}),"Issue Date From"]}),(0,a.jsx)("input",{type:"date",value:U,onChange:e=>E(e.target.value),className:"input w-40"})]}),(0,a.jsx)("span",{className:"text-jasper-slate pb-3",children:"to"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"input-label flex items-center gap-1",children:[(0,a.jsx)(b.Z,{className:"w-3 h-3"}),"Issue Date To"]}),(0,a.jsx)("input",{type:"date",value:O,onChange:e=>B(e.target.value),className:"input w-40"})]})]}),(0,a.jsxs)("div",{className:"flex gap-3 items-end",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"input-label flex items-center gap-1",children:[(0,a.jsx)(v.Z,{className:"w-3 h-3"}),"Amount Min"]}),(0,a.jsx)("input",{type:"number",value:V,onChange:e=>H(""===e.target.value?"":Number(e.target.value)),placeholder:"0",min:"0",className:"input w-32"})]}),(0,a.jsx)("span",{className:"text-jasper-slate pb-3",children:"to"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"input-label flex items-center gap-1",children:[(0,a.jsx)(v.Z,{className:"w-3 h-3"}),"Amount Max"]}),(0,a.jsx)("input",{type:"number",value:Y,onChange:e=>Q(""===e.target.value?"":Number(e.target.value)),placeholder:"No limit",min:"0",className:"input w-32"})]})]}),eS&&(0,a.jsxs)("button",{onClick:()=>{E(""),B(""),H(""),Q("")},className:"btn-ghost text-status-error hover:bg-red-50",children:[(0,a.jsx)(N.Z,{className:"w-4 h-4"}),"Clear Filters"]})]}),eS&&(0,a.jsxs)("div",{className:"mt-4 pt-4 border-t border-border flex items-center gap-2 flex-wrap",children:[(0,a.jsx)("span",{className:"text-sm text-jasper-slate",children:"Active filters:"}),U&&(0,a.jsxs)("span",{className:"badge badge-info flex items-center gap-1",children:["From: ",(0,Z.p6)(U),(0,a.jsx)("button",{onClick:()=>E(""),className:"hover:text-blue-900",children:(0,a.jsx)(N.Z,{className:"w-3 h-3"})})]}),O&&(0,a.jsxs)("span",{className:"badge badge-info flex items-center gap-1",children:["To: ",(0,Z.p6)(O),(0,a.jsx)("button",{onClick:()=>B(""),className:"hover:text-blue-900",children:(0,a.jsx)(N.Z,{className:"w-3 h-3"})})]}),""!==V&&(0,a.jsxs)("span",{className:"badge badge-success flex items-center gap-1",children:["Min: ",(0,Z.xG)(V,"ZAR"),(0,a.jsx)("button",{onClick:()=>H(""),className:"hover:text-green-900",children:(0,a.jsx)(N.Z,{className:"w-3 h-3"})})]}),""!==Y&&(0,a.jsxs)("span",{className:"badge badge-success flex items-center gap-1",children:["Max: ",(0,Z.xG)(Y,"ZAR"),(0,a.jsx)("button",{onClick:()=>Q(""),className:"hover:text-green-900",children:(0,a.jsx)(N.Z,{className:"w-3 h-3"})})]})]})]})]}),en.size>0&&(0,a.jsx)("div",{className:"card p-4 bg-jasper-emerald/5 border-jasper-emerald",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("span",{className:"text-sm font-medium text-jasper-carbon",children:[en.size," invoice",en.size>1?"s":""," selected"]}),(0,a.jsx)("button",{onClick:()=>er(new Set),className:"text-sm text-jasper-slate hover:text-jasper-carbon",children:"Clear selection"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("button",{onClick:()=>{let e=ek.filter(e=>en.has(e.id));if(0===e.length)return;let s=new Blob([["Invoice Number,Type,Status,Issue Date,Due Date,Subtotal,Tax Amount,Total,Currency",...e.map(e=>[eD(e.invoice_number),eD(e.invoice_type),eD(e.status),eD((0,Z.p6)(e.issue_date)),eD((0,Z.p6)(e.due_date)),eD(e.subtotal.toFixed(2)),eD(e.tax_amount.toFixed(2)),eD(e.total.toFixed(2)),eD(e.currency)]).map(e=>e.map(e=>'"'.concat(e,'"')).join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),t=document.createElement("a");t.href=URL.createObjectURL(s),t.download="selected_invoices_".concat(new Date().toISOString().split("T")[0],".csv"),t.click()},className:"btn-secondary text-sm py-1.5",children:[(0,a.jsx)(h.Z,{className:"w-4 h-4"}),"Export Selected"]}),(0,a.jsxs)("button",{className:"btn-secondary text-sm py-1.5",title:"Send selected invoices",children:[(0,a.jsx)(y.Z,{className:"w-4 h-4"}),"Send All"]})]})]})}),eu?(0,a.jsx)(M.cY,{rows:5,columns:8}):0===ek.length?e||t||eS?(0,a.jsx)("div",{className:"card",children:(0,a.jsx)(A.u,{type:"search",title:"No invoices match your criteria",description:"Try adjusting your search or filters to find invoices."})}):(0,a.jsx)("div",{className:"card",children:(0,a.jsx)(A.u,{type:"invoices",onAction:()=>K(!0)})}):(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("div",{className:"table-container",children:(0,a.jsxs)("table",{className:"table",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"w-10",children:(0,a.jsx)("input",{type:"checkbox",checked:eI,ref:e=>{e&&(e.indeterminate=eT)},onChange:()=>{en.size===ek.length?er(new Set):er(new Set(ek.map(e=>e.id)))},className:"w-4 h-4 rounded border-border text-jasper-emerald focus:ring-jasper-emerald cursor-pointer"})}),(0,a.jsx)("th",{children:"Invoice #"}),(0,a.jsx)("th",{children:"Type"}),(0,a.jsx)("th",{children:"Status"}),(0,a.jsx)("th",{children:"Issue Date"}),(0,a.jsx)("th",{children:"Due Date"}),(0,a.jsx)("th",{className:"text-right",children:"Amount"}),(0,a.jsx)("th",{className:"w-20",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:ek.map(e=>(0,a.jsxs)("tr",{className:(0,Z.cn)("group",en.has(e.id)&&"bg-jasper-emerald/5"),children:[(0,a.jsx)("td",{children:(0,a.jsx)("input",{type:"checkbox",checked:en.has(e.id),onChange:()=>eM(e.id),className:"w-4 h-4 rounded border-border text-jasper-emerald focus:ring-jasper-emerald cursor-pointer"})}),(0,a.jsx)("td",{children:(0,a.jsx)(n.default,{href:"/invoices/".concat(e.id),className:"font-mono text-sm text-jasper-emerald hover:text-jasper-emerald-dark font-medium",children:e.invoice_number})}),(0,a.jsx)("td",{children:(0,a.jsx)("span",{className:"text-sm text-jasper-slate capitalize",children:e.invoice_type})}),(0,a.jsx)("td",{children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[eA(e.status),(0,a.jsx)("span",{className:(0,Z.cn)("badge",(0,Z.z2)(e.status)),children:e.status})]})}),(0,a.jsx)("td",{children:(0,a.jsx)("span",{className:"text-sm text-jasper-slate",children:(0,Z.p6)(e.issue_date)})}),(0,a.jsx)("td",{children:(0,a.jsx)("span",{className:(0,Z.cn)("text-sm","overdue"===e.status?"text-status-error font-medium":"text-jasper-slate"),children:(0,Z.p6)(e.due_date)})}),(0,a.jsx)("td",{className:"text-right",children:(0,a.jsx)("span",{className:"font-semibold text-jasper-carbon",children:(0,Z.xG)(e.total,e.currency)})}),(0,a.jsx)("td",{children:(0,a.jsxs)("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,a.jsx)(n.default,{href:"/invoices/".concat(e.id),className:"p-2 hover:bg-surface-secondary rounded-lg transition-colors",title:"View",children:(0,a.jsx)(g.Z,{className:"w-4 h-4 text-jasper-slate"})}),(0,a.jsx)("button",{className:"p-2 hover:bg-surface-secondary rounded-lg transition-colors",title:"Download PDF",children:(0,a.jsx)(h.Z,{className:"w-4 h-4 text-jasper-slate"})}),"draft"===e.status&&(0,a.jsx)("button",{className:"p-2 hover:bg-surface-secondary rounded-lg transition-colors",title:"Send",children:(0,a.jsx)(y.Z,{className:"w-4 h-4 text-jasper-slate"})})]})})]},e.id))})]})}),ej>20&&(0,a.jsxs)("div",{className:"px-4 py-3 border-t border-border flex items-center justify-between",children:[(0,a.jsxs)("p",{className:"text-sm text-jasper-slate",children:["Showing ",(R-1)*20+1," to ",Math.min(20*R,ej)," of ",ej," invoices"]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>q(e=>Math.max(1,e-1)),disabled:1===R,className:"btn-secondary px-3 py-1.5 text-sm disabled:opacity-50",children:"Previous"}),(0,a.jsx)("button",{onClick:()=>q(e=>e+1),disabled:20*R>=ej,className:"btn-secondary px-3 py-1.5 text-sm disabled:opacity-50",children:"Next"})]})]})]})]}),J&&(0,a.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,a.jsxs)("div",{className:"flex min-h-full items-center justify-center p-4",children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 transition-opacity",onClick:eC}),(0,a.jsxs)("div",{className:"relative bg-surface-primary rounded-xl shadow-modal w-full max-w-3xl max-h-[90vh] overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-border",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-lg bg-jasper-emerald/10 flex items-center justify-center",children:(0,a.jsx)(f,{className:"w-5 h-5 text-jasper-emerald"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-jasper-carbon",children:"Create New Invoice"}),(0,a.jsx)("p",{className:"text-sm text-jasper-slate",children:"Generate a new invoice for a client"})]})]}),(0,a.jsx)("button",{onClick:eC,className:"p-2 hover:bg-surface-secondary rounded-lg transition-colors",children:(0,a.jsx)(N.Z,{className:"w-5 h-5 text-jasper-slate"})})]}),(0,a.jsxs)("form",{onSubmit:e_,className:"overflow-y-auto max-h-[calc(90vh-140px)]",children:[(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[es&&(0,a.jsxs)("div",{className:"flex items-center gap-3 p-4 bg-green-50 border border-green-200 rounded-lg",children:[(0,a.jsx)(i.Z,{className:"w-5 h-5 text-green-600"}),(0,a.jsx)("span",{className:"text-sm text-green-800",children:"Invoice created successfully!"})]}),$&&(0,a.jsxs)("div",{className:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 rounded-lg",children:[(0,a.jsx)(c.Z,{className:"w-5 h-5 text-red-600"}),(0,a.jsx)("span",{className:"text-sm text-red-800",children:$})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"input-label",children:["Client ",(0,a.jsx)("span",{className:"text-status-error",children:"*"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(w.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-jasper-slate-light"}),(0,a.jsxs)("select",{name:"company_id",value:ea.company_id,onChange:eg,className:"input pl-10",required:!0,children:[(0,a.jsx)("option",{value:"",children:"Select a client..."}),eb.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"input-label",children:"Project (Optional)"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(_.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-jasper-slate-light"}),(0,a.jsxs)("select",{name:"project_id",value:ea.project_id,onChange:eg,className:"input pl-10",disabled:!ea.company_id,children:[(0,a.jsx)("option",{value:"",children:"Select a project..."}),eN.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"input-label",children:"Invoice Type"}),(0,a.jsx)("select",{name:"invoice_type",value:ea.invoice_type,onChange:eg,className:"input",children:T.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"input-label",children:"Issue Date"}),(0,a.jsx)("input",{type:"date",name:"issue_date",value:ea.issue_date,onChange:eg,className:"input"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"input-label",children:"Due Date"}),(0,a.jsx)("input",{type:"date",name:"due_date",value:ea.due_date,onChange:eg,className:"input"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"input-label",children:"Line Items"}),(0,a.jsxs)("div",{className:"border border-border rounded-lg overflow-hidden",children:[(0,a.jsxs)("table",{className:"w-full text-sm",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-surface-secondary",children:[(0,a.jsx)("th",{className:"px-3 py-2 text-left font-medium text-jasper-slate",children:"Description"}),(0,a.jsx)("th",{className:"px-3 py-2 text-center font-medium text-jasper-slate w-20",children:"Qty"}),(0,a.jsx)("th",{className:"px-3 py-2 text-right font-medium text-jasper-slate w-32",children:"Unit Price"}),(0,a.jsx)("th",{className:"px-3 py-2 text-right font-medium text-jasper-slate w-32",children:"Amount"}),(0,a.jsx)("th",{className:"px-3 py-2 w-10"})]})}),(0,a.jsx)("tbody",{children:ea.line_items.map((e,s)=>(0,a.jsxs)("tr",{className:"border-t border-border-light",children:[(0,a.jsx)("td",{className:"px-2 py-2",children:(0,a.jsx)("input",{type:"text",value:e.description,onChange:e=>ef(s,"description",e.target.value),placeholder:"Item description...",className:"w-full px-2 py-1.5 text-sm border border-border rounded focus:outline-none focus:ring-1 focus:ring-jasper-emerald"})}),(0,a.jsx)("td",{className:"px-2 py-2",children:(0,a.jsx)("input",{type:"number",value:e.quantity,onChange:e=>ef(s,"quantity",e.target.value),min:"1",className:"w-full px-2 py-1.5 text-sm text-center border border-border rounded focus:outline-none focus:ring-1 focus:ring-jasper-emerald"})}),(0,a.jsx)("td",{className:"px-2 py-2",children:(0,a.jsx)("input",{type:"number",value:e.unit_price,onChange:e=>ef(s,"unit_price",e.target.value),min:"0",step:"0.01",className:"w-full px-2 py-1.5 text-sm text-right border border-border rounded focus:outline-none focus:ring-1 focus:ring-jasper-emerald"})}),(0,a.jsx)("td",{className:"px-3 py-2 text-right font-medium text-jasper-carbon",children:(0,Z.xG)(e.amount,ea.currency)}),(0,a.jsx)("td",{className:"px-2 py-2",children:(0,a.jsx)("button",{type:"button",onClick:()=>ew(s),className:"p-1 text-jasper-slate hover:text-status-error transition-colors",disabled:1===ea.line_items.length,children:(0,a.jsx)(N.Z,{className:"w-4 h-4"})})})]},s))})]}),(0,a.jsx)("div",{className:"px-3 py-2 border-t border-border-light",children:(0,a.jsx)("button",{type:"button",onClick:()=>{el(e=>({...e,line_items:[...e.line_items,{description:"",quantity:1,unit_price:0,amount:0}]}))},className:"text-sm text-jasper-emerald hover:text-jasper-emerald-dark font-medium",children:"+ Add Line Item"})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"input-label",children:"Notes"}),(0,a.jsx)("textarea",{name:"notes",value:ea.notes,onChange:eg,placeholder:"Additional notes for the invoice...",rows:4,className:"input resize-none"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"input-label",children:"Currency"}),(0,a.jsxs)("select",{name:"currency",value:ea.currency,onChange:eg,className:"input",children:[(0,a.jsx)("option",{value:"ZAR",children:"ZAR"}),(0,a.jsx)("option",{value:"USD",children:"USD"}),(0,a.jsx)("option",{value:"EUR",children:"EUR"}),(0,a.jsx)("option",{value:"GBP",children:"GBP"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"input-label",children:"Tax %"}),(0,a.jsx)("input",{type:"number",name:"tax_percent",value:ea.tax_percent,onChange:eg,min:"0",max:"100",className:"input"})]})]}),(0,a.jsxs)("div",{className:"bg-surface-secondary rounded-lg p-4 space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-jasper-slate",children:"Subtotal"}),(0,a.jsx)("span",{className:"text-jasper-carbon",children:(0,Z.xG)(ey().subtotal,ea.currency)})]}),ea.discount_percent>0&&(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsxs)("span",{className:"text-jasper-slate",children:["Discount (",ea.discount_percent,"%)"]}),(0,a.jsxs)("span",{className:"text-status-error",children:["-",(0,Z.xG)(ey().discountAmount,ea.currency)]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsxs)("span",{className:"text-jasper-slate",children:["Tax (",ea.tax_percent,"%)"]}),(0,a.jsx)("span",{className:"text-jasper-carbon",children:(0,Z.xG)(ey().taxAmount,ea.currency)})]}),(0,a.jsxs)("div",{className:"flex justify-between text-base font-semibold pt-2 border-t border-border",children:[(0,a.jsx)("span",{className:"text-jasper-carbon",children:"Total"}),(0,a.jsx)("span",{className:"text-jasper-emerald",children:(0,Z.xG)(ey().total,ea.currency)})]})]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-end gap-3 px-6 py-4 border-t border-border bg-surface-secondary",children:[(0,a.jsx)("button",{type:"button",onClick:eC,className:"btn-secondary",disabled:W,children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"btn-primary",disabled:W||es,children:W?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(C.Z,{className:"w-4 h-4 animate-spin"}),"Creating..."]}):es?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.Z,{className:"w-4 h-4"}),"Created!"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(j.Z,{className:"w-4 h-4"}),"Create Invoice"]})})]})]})]})]})})]})}function P(e){let{title:s,value:t,icon:l,color:n}=e;return(0,a.jsx)("div",{className:"card p-5",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:(0,Z.cn)("w-12 h-12 rounded-xl flex items-center justify-center",{blue:"bg-blue-100 text-blue-600",green:"bg-green-100 text-green-600",amber:"bg-amber-100 text-amber-600",red:"bg-red-100 text-red-600"}[n]),children:(0,a.jsx)(l,{className:"w-6 h-6"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-jasper-slate",children:s}),(0,a.jsx)("p",{className:"text-xl font-semibold text-jasper-carbon",children:t})]})]})})}},5367:function(e,s,t){"use strict";t.d(s,{u:function(){return p}});var a=t(7437),l=t(7648),n=t(2051),r=t(5805),i=t(8736),c=t(3417),d=t(3247),o=t(9801),u=t(9397),x=t(3448);let m={projects:{icon:n.Z,title:"No projects yet",description:"Create your first project to start tracking your pipeline and deliverables.",actionLabel:"Create Project",iconColor:"text-jasper-emerald",bgColor:"bg-jasper-emerald/10"},clients:{icon:r.Z,title:"No clients yet",description:"Add your first client to start building your customer relationships.",actionLabel:"Add Client",iconColor:"text-blue-600",bgColor:"bg-blue-100"},invoices:{icon:i.Z,title:"No invoices yet",description:"Create your first invoice to start tracking payments and revenue.",actionLabel:"Create Invoice",iconColor:"text-purple-600",bgColor:"bg-purple-100"},messages:{icon:c.Z,title:"No messages",description:"Your inbox is empty. Messages from clients will appear here.",iconColor:"text-amber-600",bgColor:"bg-amber-100"},search:{icon:d.Z,title:"No results found",description:"Try adjusting your search or filter criteria to find what you're looking for.",iconColor:"text-jasper-slate",bgColor:"bg-jasper-slate/10"},activity:{icon:o.Z,title:"No activity yet",description:"Recent activity and updates will appear here as you use the platform.",iconColor:"text-jasper-slate",bgColor:"bg-jasper-slate/10"},generic:{icon:o.Z,title:"Nothing here yet",description:"This section is empty. Content will appear here once available.",iconColor:"text-jasper-slate",bgColor:"bg-jasper-slate/10"}};function p(e){let{type:s,title:t,description:n,actionLabel:r,actionHref:i,onAction:c,className:d}=e,o=m[s],p=o.icon,h=t||o.title,j=n||o.description,b=r||o.actionLabel;return(0,a.jsxs)("div",{className:(0,x.cn)("flex flex-col items-center justify-center py-12 px-4 text-center",d),children:[(0,a.jsxs)("div",{className:"relative mb-6",children:[(0,a.jsx)("div",{className:(0,x.cn)("w-20 h-20 rounded-2xl flex items-center justify-center",o.bgColor),children:(0,a.jsx)(p,{className:(0,x.cn)("w-10 h-10",o.iconColor)})}),(0,a.jsx)("div",{className:"absolute -top-2 -right-2 w-4 h-4 rounded-full bg-jasper-emerald/20"}),(0,a.jsx)("div",{className:"absolute -bottom-1 -left-3 w-3 h-3 rounded-full bg-jasper-slate/20"})]}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-jasper-carbon mb-2",children:h}),(0,a.jsx)("p",{className:"text-sm text-jasper-slate max-w-sm mb-6",children:j}),b&&(i||c)&&(i?(0,a.jsxs)(l.default,{href:i,className:"btn-primary inline-flex items-center gap-2",children:[(0,a.jsx)(u.Z,{className:"w-4 h-4"}),b]}):(0,a.jsxs)("button",{onClick:c,className:"btn-primary inline-flex items-center gap-2",children:[(0,a.jsx)(u.Z,{className:"w-4 h-4"}),b]}))]})}},1235:function(e,s,t){"use strict";t.d(s,{NR:function(){return d},cY:function(){return i}});var a=t(7437),l=t(3448);function n(e){let{className:s}=e;return(0,a.jsx)("div",{className:(0,l.cn)("animate-pulse rounded-md bg-jasper-slate/10",s)})}function r(e){let{columns:s=6}=e;return(0,a.jsx)("tr",{children:Array.from({length:s}).map((e,t)=>(0,a.jsx)("td",{className:"px-4 py-4",children:(0,a.jsx)(n,{className:(0,l.cn)("h-4",0===t?"w-20":t===s-1?"w-8":"w-full max-w-[120px]")})},t))})}function i(e){let{rows:s=5,columns:t=6}=e;return(0,a.jsx)("div",{className:"card",children:(0,a.jsx)("div",{className:"table-container",children:(0,a.jsxs)("table",{className:"table",children:[(0,a.jsx)("thead",{children:(0,a.jsx)("tr",{children:Array.from({length:t}).map((e,s)=>(0,a.jsx)("th",{children:(0,a.jsx)(n,{className:"h-4 w-20"})},s))})}),(0,a.jsx)("tbody",{children:Array.from({length:s}).map((e,s)=>(0,a.jsx)(r,{columns:t},s))})]})})})}function c(){return(0,a.jsxs)("div",{className:"card p-5",children:[(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)(n,{className:"w-12 h-12 rounded-xl flex-shrink-0"}),(0,a.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,a.jsx)(n,{className:"h-5 w-3/4"}),(0,a.jsx)(n,{className:"h-4 w-16 rounded-full"})]})]}),(0,a.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(n,{className:"w-4 h-4 rounded"}),(0,a.jsx)(n,{className:"h-4 w-40"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(n,{className:"w-4 h-4 rounded"}),(0,a.jsx)(n,{className:"h-4 w-24"})]})]}),(0,a.jsxs)("div",{className:"mt-4 pt-4 border-t border-border flex justify-between",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(n,{className:"h-3 w-20"}),(0,a.jsx)(n,{className:"h-5 w-24"})]}),(0,a.jsxs)("div",{className:"space-y-1 text-right",children:[(0,a.jsx)(n,{className:"h-3 w-16"}),(0,a.jsx)(n,{className:"h-5 w-20"})]})]})]})}function d(e){let{count:s=6}=e;return(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Array.from({length:s}).map((e,s)=>(0,a.jsx)(c,{},s))})}}},function(e){e.O(0,[145,197,828,797,412,766,213,605,971,117,744],function(){return e(e.s=5928)}),_N_E=e.O()}]);