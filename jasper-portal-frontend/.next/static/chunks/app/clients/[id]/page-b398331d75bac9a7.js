(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[323],{8768:function(e,s,a){Promise.resolve().then(a.bind(a,9483))},2660:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(9205).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},1047:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(9205).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},9322:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(9205).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},6362:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(9205).Z)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},9345:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(9205).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},3774:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(9205).Z)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},3041:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(9205).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},9397:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(9205).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},5868:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(9205).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},525:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(9205).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},9483:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return R}});var t=a(7437),l=a(2265),r=a(9376),n=a(7648),i=a(1605),c=a(9597),d=a(1817),m=a(9322),o=a(2660),x=a(9205);let h=(0,x.Z)("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);var p=a(525),j=a(8736),u=a(5252),b=a(3417),f=a(5868),N=a(8420),g=a(3774),v=a(9345),y=a(3041);let w=(0,x.Z)("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);var _=a(9397),k=a(1671),C=a(4743),Z=a(407),S=a(1047),P=a(2489),M=a(2369),I=a(6362),F=a(3448),E=a(5359),q=a(9827);let A={lead:"bg-blue-100 text-blue-700",prospect:"bg-purple-100 text-purple-700",qualified:"bg-amber-100 text-amber-700",proposal_sent:"bg-orange-100 text-orange-700",negotiation:"bg-yellow-100 text-yellow-700",client:"bg-green-100 text-green-700",inactive:"bg-gray-100 text-gray-700",lost:"bg-red-100 text-red-700"},L={draft:"bg-gray-100 text-gray-700",sent:"bg-blue-100 text-blue-700",viewed:"bg-purple-100 text-purple-700",paid:"bg-green-100 text-green-700",overdue:"bg-red-100 text-red-700",cancelled:"bg-gray-100 text-gray-500"},T={financial_services:"Financial Services",technology:"Technology",manufacturing:"Manufacturing",agriculture:"Agriculture",mining:"Mining",healthcare:"Healthcare",retail:"Retail",real_estate:"Real Estate",energy:"Energy",infrastructure:"Infrastructure",education:"Education",tourism:"Tourism",other:"Other"},z=Object.entries(T).map(e=>{let[s,a]=e;return{value:s,label:a}}),D=[{value:"lead",label:"Lead"},{value:"prospect",label:"Prospect"},{value:"qualified",label:"Qualified"},{value:"proposal_sent",label:"Proposal Sent"},{value:"negotiation",label:"Negotiation"},{value:"client",label:"Client"},{value:"inactive",label:"Inactive"},{value:"lost",label:"Lost"}],O=[{value:"website",label:"Website"},{value:"referral",label:"Referral"},{value:"linkedin",label:"LinkedIn"},{value:"conference",label:"Conference/Event"},{value:"cold_outreach",label:"Cold Outreach"},{value:"partner",label:"Partner"},{value:"other",label:"Other"}];function R(){let e=Number((0,r.useParams)().id),[s,a]=(0,l.useState)(null),[x,I]=(0,l.useState)([]),[R,G]=(0,l.useState)([]),[U,V]=(0,l.useState)([]),[H,Q]=(0,l.useState)(!0),[J,W]=(0,l.useState)("overview"),[K,X]=(0,l.useState)(null),[Y,$]=(0,l.useState)(null),[ee,es]=(0,l.useState)(!1),[ea,et]=(0,l.useState)(!1),[el,er]=(0,l.useState)(null),[en,ei]=(0,l.useState)(!1),[ec,ed]=(0,l.useState)({name:"",trading_name:"",industry:"",country:"",city:"",website:"",phone:"",email:"",status:"",lead_source:"",referred_by:"",notes:""}),[em,eo]=(0,l.useState)(!1),[ex,eh]=(0,l.useState)(!1),[ep,ej]=(0,l.useState)(null),[eu,eb]=(0,l.useState)(!1),[ef,eN]=(0,l.useState)({first_name:"",last_name:"",email:"",phone:"",job_title:"",is_primary:!1,is_decision_maker:!1}),eg=(0,q.NL)();(0,l.useEffect)(()=>{e&&ev()},[e]);let ev=async()=>{try{let[s,t,l,r]=await Promise.all([E.cv.get(e),E.cv.getContacts(e).catch(()=>[]),E.qx.list({company_id:e,page_size:100}).catch(()=>({projects:[]})),E.iR.list({company_id:e,page_size:100}).catch(()=>({invoices:[]}))]);a(s),I(t||[]),G(l.projects||[]),V(r.invoices||[])}catch(e){console.error("Failed to fetch client:",e)}finally{Q(!1)}},ey=async s=>{X(s),$(null);try{await E.cv.sendInvite(e,s),$({contactId:s,status:"sent"})}catch(e){$({contactId:s,status:"error",message:e.message})}finally{X(null)}},ew=()=>{s&&(ed({name:s.name||"",trading_name:s.trading_name||"",industry:s.industry||"",country:s.country||"",city:s.city||"",website:s.website||"",phone:s.phone||"",email:s.email||"",status:s.status||"",lead_source:s.lead_source||"",referred_by:s.referred_by||"",notes:s.notes||""}),es(!0))},e_=e=>{let{name:s,value:a}=e.target;ed(e=>({...e,[s]:a}))},ek=async s=>{s.preventDefault(),et(!0),er(null),ei(!1);try{if(!ec.name.trim())throw Error("Company name is required");let s={name:ec.name.trim(),trading_name:ec.trading_name.trim()||void 0,industry:ec.industry||void 0,country:ec.country.trim()||void 0,city:ec.city.trim()||void 0,website:ec.website.trim()||void 0,phone:ec.phone.trim()||void 0,email:ec.email.trim()||void 0,status:ec.status||void 0,lead_source:ec.lead_source||void 0,referred_by:ec.referred_by.trim()||void 0,notes:ec.notes.trim()||void 0},t=await E.cv.update(e,s);a(t),ei(!0),eg.invalidateQueries({queryKey:["companies"]}),setTimeout(()=>{es(!1),ei(!1)},1500)}catch(e){er(e.message||"Failed to update client")}finally{et(!1)}},eC=()=>{es(!1),er(null),ei(!1)},eZ=e=>{let{name:s,value:a,type:t,checked:l}=e.target;eN(e=>({...e,[s]:"checkbox"===t?l:a}))},eS=async s=>{s.preventDefault(),eh(!0),ej(null),eb(!1);try{if(!ef.first_name.trim()||!ef.email.trim())throw Error("First name and email are required");let s={first_name:ef.first_name.trim(),last_name:ef.last_name.trim()||void 0,email:ef.email.trim(),phone:ef.phone.trim()||void 0,job_title:ef.job_title.trim()||void 0,is_primary:ef.is_primary,is_decision_maker:ef.is_decision_maker},a=await fetch("".concat("http://127.0.0.1:8000","/clients/").concat(e,"/contacts"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(s)});if(!a.ok)throw Error("Failed to add contact");let t=await a.json();I(e=>[...e,t]),eb(!0),setTimeout(()=>{eo(!1),eN({first_name:"",last_name:"",email:"",phone:"",job_title:"",is_primary:!1,is_decision_maker:!1}),eb(!1)},1500)}catch(e){ej(e.message||"Failed to add contact")}finally{eh(!1)}},eP=()=>{eo(!1),ej(null),eb(!1),eN({first_name:"",last_name:"",email:"",phone:"",job_title:"",is_primary:!1,is_decision_maker:!1})};if(H)return(0,t.jsx)("div",{className:"min-h-screen bg-surface-secondary flex items-center justify-center",children:(0,t.jsxs)("div",{className:"flex items-center gap-3 text-jasper-slate",children:[(0,t.jsx)(d.Z,{className:"w-5 h-5 animate-spin"}),"Loading client..."]})});if(!s)return(0,t.jsx)("div",{className:"min-h-screen bg-surface-secondary flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(m.Z,{className:"w-12 h-12 text-jasper-slate mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-jasper-slate mb-4",children:"Client not found"}),(0,t.jsx)(n.default,{href:"/clients",className:"btn-primary",children:"Back to Clients"})]})});x.find(e=>e.is_primary)||x[0];let eM=R.filter(e=>!["final","cancelled"].includes(e.stage)),eI=R.filter(e=>"final"===e.stage),eF=U.filter(e=>["sent","viewed","overdue"].includes(e.status)),eE=U.filter(e=>"paid"===e.status);return(0,t.jsxs)("div",{className:"min-h-screen bg-surface-secondary",children:[(0,t.jsx)(i.h4,{title:s.name,subtitle:s.trading_name||T[s.industry||""]||"Client"}),(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsxs)(n.default,{href:"/clients",className:"inline-flex items-center gap-2 text-sm text-jasper-slate hover:text-jasper-carbon transition-colors",children:[(0,t.jsx)(o.Z,{className:"w-4 h-4"}),"Back to Clients"]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsx)("div",{className:"card p-5",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-xl bg-jasper-emerald/10 flex items-center justify-center",children:(0,t.jsx)(h,{className:"w-6 h-6 text-jasper-emerald"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-jasper-slate",children:"Active Projects"}),(0,t.jsx)("p",{className:"text-2xl font-semibold text-jasper-carbon",children:eM.length})]})]})}),(0,t.jsx)("div",{className:"card p-5",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-xl bg-blue-100 flex items-center justify-center",children:(0,t.jsx)(p.Z,{className:"w-6 h-6 text-blue-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-jasper-slate",children:"Total Revenue"}),(0,t.jsx)("p",{className:"text-2xl font-semibold text-jasper-carbon",children:(0,F.xG)(s.total_revenue,"USD")})]})]})}),(0,t.jsx)("div",{className:"card p-5",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-xl bg-amber-100 flex items-center justify-center",children:(0,t.jsx)(j.Z,{className:"w-6 h-6 text-amber-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-jasper-slate",children:"Pending Invoices"}),(0,t.jsx)("p",{className:"text-2xl font-semibold text-jasper-carbon",children:eF.length})]})]})}),(0,t.jsx)("div",{className:"card p-5",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:(0,F.cn)("w-12 h-12 rounded-xl flex items-center justify-center",s.outstanding_balance>0?"bg-red-100":"bg-green-100"),children:(0,t.jsx)(u.Z,{className:(0,F.cn)("w-6 h-6",s.outstanding_balance>0?"text-red-600":"text-green-600")})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-jasper-slate",children:"Outstanding"}),(0,t.jsx)("p",{className:(0,F.cn)("text-2xl font-semibold",s.outstanding_balance>0?"text-red-600":"text-jasper-carbon"),children:(0,F.xG)(s.outstanding_balance,"USD")})]})]})})]}),(0,t.jsxs)("div",{className:"flex gap-1 border-b border-border",children:[(0,t.jsx)("button",{onClick:()=>W("overview"),className:(0,F.cn)("px-4 py-2 text-sm font-medium border-b-2 transition-colors","overview"===J?"border-jasper-emerald text-jasper-emerald":"border-transparent text-jasper-slate hover:text-jasper-carbon"),children:"Overview"}),(0,t.jsxs)("button",{onClick:()=>W("projects"),className:(0,F.cn)("px-4 py-2 text-sm font-medium border-b-2 transition-colors flex items-center gap-2","projects"===J?"border-jasper-emerald text-jasper-emerald":"border-transparent text-jasper-slate hover:text-jasper-carbon"),children:[(0,t.jsx)(h,{className:"w-4 h-4"}),"Projects",R.length>0&&(0,t.jsx)("span",{className:"badge badge-secondary text-xs",children:R.length})]}),(0,t.jsxs)("button",{onClick:()=>W("invoices"),className:(0,F.cn)("px-4 py-2 text-sm font-medium border-b-2 transition-colors flex items-center gap-2","invoices"===J?"border-jasper-emerald text-jasper-emerald":"border-transparent text-jasper-slate hover:text-jasper-carbon"),children:[(0,t.jsx)(j.Z,{className:"w-4 h-4"}),"Invoices",U.length>0&&(0,t.jsx)("span",{className:"badge badge-secondary text-xs",children:U.length})]}),(0,t.jsxs)("button",{onClick:()=>W("messages"),className:(0,F.cn)("px-4 py-2 text-sm font-medium border-b-2 transition-colors flex items-center gap-2","messages"===J?"border-jasper-emerald text-jasper-emerald":"border-transparent text-jasper-slate hover:text-jasper-carbon"),children:[(0,t.jsx)(b.Z,{className:"w-4 h-4"}),"Messages"]})]}),"overview"===J&&(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,t.jsxs)("div",{className:"card",children:[(0,t.jsxs)("div",{className:"card-header flex items-center justify-between",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-jasper-carbon",children:"Company Information"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:(0,F.cn)("badge text-sm",A[s.status]||"badge-neutral"),children:s.status}),(0,t.jsx)("button",{onClick:ew,className:"p-2 hover:bg-surface-secondary rounded-lg transition-colors",children:(0,t.jsx)(f.Z,{className:"w-4 h-4 text-jasper-slate"})})]})]}),(0,t.jsxs)("div",{className:"card-body",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.industry&&(0,t.jsx)(B,{icon:N.Z,label:"Industry",value:T[s.industry]||s.industry}),(s.city||s.country)&&(0,t.jsx)(B,{icon:g.Z,label:"Location",value:[s.city,s.country].filter(Boolean).join(", ")}),s.email&&(0,t.jsx)(B,{icon:v.Z,label:"Email",value:s.email,href:"mailto:".concat(s.email)}),s.phone&&(0,t.jsx)(B,{icon:y.Z,label:"Phone",value:s.phone,href:"tel:".concat(s.phone)}),s.website&&(0,t.jsx)(B,{icon:w,label:"Website",value:s.website.replace(/^https?:\/\//,""),href:s.website,external:!0}),s.lead_source&&(0,t.jsx)(B,{icon:p.Z,label:"Lead Source",value:s.lead_source.replace(/_/g," ")})]}),s.notes&&(0,t.jsxs)("div",{className:"mt-6 pt-6 border-t border-border",children:[(0,t.jsx)("p",{className:"text-sm text-jasper-slate mb-2",children:"Notes"}),(0,t.jsx)("p",{className:"text-jasper-carbon",children:s.notes})]}),s.dfi_targets&&s.dfi_targets.length>0&&(0,t.jsxs)("div",{className:"mt-6 pt-6 border-t border-border",children:[(0,t.jsx)("p",{className:"text-sm text-jasper-slate mb-3",children:"Target DFIs"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:s.dfi_targets.map(e=>(0,t.jsx)("span",{className:"badge badge-info",children:e},e))})]})]})]}),(0,t.jsxs)("div",{className:"card",children:[(0,t.jsxs)("div",{className:"card-header flex items-center justify-between",children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold text-jasper-carbon",children:["Contacts",(0,t.jsxs)("span",{className:"ml-2 text-sm font-normal text-jasper-slate",children:["(",x.length,")"]})]}),(0,t.jsxs)("button",{onClick:()=>eo(!0),className:"btn-secondary text-sm",children:[(0,t.jsx)(_.Z,{className:"w-4 h-4"}),"Add Contact"]})]}),(0,t.jsx)("div",{className:"divide-y divide-border",children:0===x.length?(0,t.jsx)("div",{className:"p-6 text-center text-jasper-slate",children:"No contacts added yet"}):x.map(e=>(0,t.jsxs)("div",{className:"p-4 flex items-start justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-full bg-jasper-navy/10 flex items-center justify-center flex-shrink-0",children:(0,t.jsx)("span",{className:"text-sm font-medium text-jasper-navy",children:(0,F.Qm)("".concat(e.first_name," ").concat(e.last_name))})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("span",{className:"font-medium text-jasper-carbon",children:[e.first_name," ",e.last_name]}),e.is_primary&&(0,t.jsx)("span",{className:"badge badge-success text-xs",children:"Primary"}),e.is_decision_maker&&(0,t.jsx)("span",{className:"badge badge-info text-xs",children:"Decision Maker"})]}),e.job_title&&(0,t.jsx)("p",{className:"text-sm text-jasper-slate",children:e.job_title}),(0,t.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-sm text-jasper-slate",children:[(0,t.jsxs)("a",{href:"mailto:".concat(e.email),className:"flex items-center gap-1 hover:text-jasper-emerald transition-colors",children:[(0,t.jsx)(v.Z,{className:"w-3 h-3"}),e.email]}),e.phone&&(0,t.jsxs)("a",{href:"tel:".concat(e.phone),className:"flex items-center gap-1 hover:text-jasper-emerald transition-colors",children:[(0,t.jsx)(y.Z,{className:"w-3 h-3"}),e.phone]})]}),(null==Y?void 0:Y.contactId)===e.id&&(0,t.jsx)("div",{className:(0,F.cn)("mt-2 text-sm flex items-center gap-1","sent"===Y.status?"text-green-600":"text-red-600"),children:"sent"===Y.status?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(k.Z,{className:"w-3 h-3"}),"Portal invitation sent"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m.Z,{className:"w-3 h-3"}),Y.message||"Failed to send invite"]})})]})]}),(0,t.jsxs)("button",{onClick:()=>ey(e.id),disabled:K===e.id,className:"btn-ghost text-sm whitespace-nowrap",children:[K===e.id?(0,t.jsx)(d.Z,{className:"w-4 h-4 animate-spin"}):(0,t.jsx)(C.Z,{className:"w-4 h-4"}),K===e.id?"Sending...":"Send Invite"]})]},e.id))})]})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"card",children:[(0,t.jsx)("div",{className:"card-header",children:(0,t.jsx)("h3",{className:"font-semibold text-jasper-carbon",children:"Quick Actions"})}),(0,t.jsxs)("div",{className:"card-body space-y-2",children:[(0,t.jsxs)(n.default,{href:"/projects/new?company_id=".concat(s.id),className:"btn-primary w-full justify-start",children:[(0,t.jsx)(h,{className:"w-4 h-4"}),"Create Project"]}),(0,t.jsxs)(n.default,{href:"/invoices/new?company_id=".concat(s.id),className:"btn-secondary w-full justify-start",children:[(0,t.jsx)(j.Z,{className:"w-4 h-4"}),"Create Invoice"]}),(0,t.jsxs)("button",{onClick:()=>W("messages"),className:"btn-ghost w-full justify-start",children:[(0,t.jsx)(b.Z,{className:"w-4 h-4"}),"Send Message"]}),(0,t.jsxs)("button",{onClick:ew,className:"btn-ghost w-full justify-start",children:[(0,t.jsx)(f.Z,{className:"w-4 h-4"}),"Edit Client"]})]})]}),R.length>0&&(0,t.jsxs)("div",{className:"card",children:[(0,t.jsxs)("div",{className:"card-header flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"font-semibold text-jasper-carbon",children:"Recent Projects"}),(0,t.jsx)("button",{onClick:()=>W("projects"),className:"text-sm text-jasper-emerald hover:underline",children:"View all"})]}),(0,t.jsx)("div",{className:"divide-y divide-border",children:R.slice(0,3).map(e=>(0,t.jsxs)(n.default,{href:"/projects/".concat(e.id),className:"flex items-center justify-between p-4 hover:bg-surface-secondary transition-colors",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-jasper-carbon text-sm",children:e.reference}),(0,t.jsx)("p",{className:"text-xs text-jasper-slate",children:e.name})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:(0,F.cn)("badge text-xs",(0,F.ul)(e.stage)),children:(0,F.im)(e.stage)}),(0,t.jsx)(Z.Z,{className:"w-4 h-4 text-jasper-slate"})]})]},e.id))})]}),(0,t.jsx)("div",{className:"card",children:(0,t.jsxs)("div",{className:"card-body text-sm text-jasper-slate space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Created"}),(0,t.jsx)("span",{className:"text-jasper-carbon",children:(0,F.p6)(s.created_at)})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Last Updated"}),(0,t.jsx)("span",{className:"text-jasper-carbon",children:(0,F.p6)(s.updated_at)})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Client ID"}),(0,t.jsxs)("span",{className:"font-mono text-jasper-carbon",children:["#",s.id]})]})]})})]})]}),"projects"===J&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-jasper-carbon",children:"Projects"}),(0,t.jsxs)("p",{className:"text-sm text-jasper-slate",children:[eM.length," active, ",eI.length," completed"]})]}),(0,t.jsxs)(n.default,{href:"/projects/new?company_id=".concat(s.id),className:"btn-primary",children:[(0,t.jsx)(h,{className:"w-4 h-4"}),"New Project"]})]}),0===R.length?(0,t.jsxs)("div",{className:"card p-12 text-center",children:[(0,t.jsx)(h,{className:"w-12 h-12 text-jasper-slate mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-jasper-slate mb-4",children:"No projects yet"}),(0,t.jsx)(n.default,{href:"/projects/new?company_id=".concat(s.id),className:"btn-primary inline-flex",children:"Create First Project"})]}):(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:R.map(e=>(0,t.jsxs)(n.default,{href:"/projects/".concat(e.id),className:"card card-hover p-5",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-semibold text-jasper-carbon",children:e.reference}),(0,t.jsx)("p",{className:"text-sm text-jasper-slate",children:e.name})]}),(0,t.jsx)("span",{className:(0,F.cn)("badge text-xs",(0,F.ul)(e.stage)),children:(0,F.im)(e.stage)})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm mb-4",children:[(0,t.jsx)("span",{className:"text-jasper-slate",children:"Value"}),(0,t.jsx)("span",{className:"font-medium text-jasper-carbon",children:(0,F.xG)(e.value,e.currency)})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-jasper-slate",children:"Progress"}),(0,t.jsxs)("span",{className:"font-medium text-jasper-emerald",children:[e.progress_percent,"%"]})]}),(0,t.jsx)("div",{className:"h-2 bg-surface-tertiary rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:"h-full bg-jasper-emerald rounded-full transition-all",style:{width:"".concat(e.progress_percent,"%")}})})]}),e.target_completion&&(0,t.jsxs)("div",{className:"mt-4 pt-4 border-t border-border flex items-center justify-between text-sm",children:[(0,t.jsxs)("span",{className:"text-jasper-slate flex items-center gap-1",children:[(0,t.jsx)(S.Z,{className:"w-3 h-3"}),"Target"]}),(0,t.jsx)("span",{className:"text-jasper-carbon",children:(0,F.p6)(e.target_completion)})]})]},e.id))})]}),"invoices"===J&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-jasper-carbon",children:"Invoices"}),(0,t.jsxs)("p",{className:"text-sm text-jasper-slate",children:[eF.length," pending, ",eE.length," paid"]})]}),(0,t.jsxs)(n.default,{href:"/invoices/new?company_id=".concat(s.id),className:"btn-primary",children:[(0,t.jsx)(j.Z,{className:"w-4 h-4"}),"New Invoice"]})]}),0===U.length?(0,t.jsxs)("div",{className:"card p-12 text-center",children:[(0,t.jsx)(j.Z,{className:"w-12 h-12 text-jasper-slate mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-jasper-slate mb-4",children:"No invoices yet"}),(0,t.jsx)(n.default,{href:"/invoices/new?company_id=".concat(s.id),className:"btn-primary inline-flex",children:"Create First Invoice"})]}):(0,t.jsx)("div",{className:"card overflow-hidden",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{className:"bg-surface-secondary border-b border-border",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"text-left px-4 py-3 text-sm font-medium text-jasper-slate",children:"Invoice"}),(0,t.jsx)("th",{className:"text-left px-4 py-3 text-sm font-medium text-jasper-slate",children:"Status"}),(0,t.jsx)("th",{className:"text-left px-4 py-3 text-sm font-medium text-jasper-slate",children:"Amount"}),(0,t.jsx)("th",{className:"text-left px-4 py-3 text-sm font-medium text-jasper-slate",children:"Due Date"}),(0,t.jsx)("th",{className:"text-right px-4 py-3 text-sm font-medium text-jasper-slate"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-border",children:U.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-surface-secondary/50 transition-colors",children:[(0,t.jsxs)("td",{className:"px-4 py-4",children:[(0,t.jsx)(n.default,{href:"/invoices/".concat(e.id),className:"font-medium text-jasper-carbon hover:text-jasper-emerald",children:e.invoice_number}),(0,t.jsx)("p",{className:"text-xs text-jasper-slate",children:(0,F.p6)(e.created_at)})]}),(0,t.jsx)("td",{className:"px-4 py-4",children:(0,t.jsx)("span",{className:(0,F.cn)("badge text-xs",L[e.status]||"badge-neutral"),children:e.status})}),(0,t.jsx)("td",{className:"px-4 py-4 font-medium text-jasper-carbon",children:(0,F.xG)(e.total_amount,e.currency)}),(0,t.jsx)("td",{className:"px-4 py-4 text-sm text-jasper-slate",children:(0,F.p6)(e.due_date)}),(0,t.jsx)("td",{className:"px-4 py-4 text-right",children:(0,t.jsxs)(n.default,{href:"/invoices/".concat(e.id),className:"btn-ghost text-sm",children:["View",(0,t.jsx)(Z.Z,{className:"w-4 h-4"})]})})]},e.id))})]})})]}),"messages"===J&&(0,t.jsx)("div",{className:"h-[600px]",children:(0,t.jsx)(c.p,{companyId:s.id,companyName:s.name})})]}),ee&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,t.jsxs)("div",{className:"flex min-h-full items-center justify-center p-4",children:[(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 transition-opacity",onClick:eC}),(0,t.jsxs)("div",{className:"relative bg-surface-primary rounded-xl shadow-modal w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-border",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-lg bg-jasper-emerald/10 flex items-center justify-center",children:(0,t.jsx)(N.Z,{className:"w-5 h-5 text-jasper-emerald"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-jasper-carbon",children:"Edit Client"}),(0,t.jsx)("p",{className:"text-sm text-jasper-slate",children:"Update client information"})]})]}),(0,t.jsx)("button",{onClick:eC,className:"p-2 hover:bg-surface-secondary rounded-lg transition-colors",children:(0,t.jsx)(P.Z,{className:"w-5 h-5 text-jasper-slate"})})]}),(0,t.jsxs)("form",{onSubmit:ek,className:"overflow-y-auto max-h-[calc(90vh-140px)]",children:[(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[en&&(0,t.jsxs)("div",{className:"flex items-center gap-3 p-4 bg-green-50 border border-green-200 rounded-lg",children:[(0,t.jsx)(k.Z,{className:"w-5 h-5 text-green-600"}),(0,t.jsx)("span",{className:"text-sm text-green-800",children:"Client updated successfully!"})]}),el&&(0,t.jsxs)("div",{className:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 rounded-lg",children:[(0,t.jsx)(m.Z,{className:"w-5 h-5 text-red-600"}),(0,t.jsx)("span",{className:"text-sm text-red-800",children:el})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"input-label",children:["Company Name ",(0,t.jsx)("span",{className:"text-status-error",children:"*"})]}),(0,t.jsx)("input",{type:"text",name:"name",value:ec.name,onChange:e_,className:"input",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"input-label",children:"Trading Name"}),(0,t.jsx)("input",{type:"text",name:"trading_name",value:ec.trading_name,onChange:e_,className:"input"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"input-label",children:"Industry"}),(0,t.jsxs)("select",{name:"industry",value:ec.industry,onChange:e_,className:"input",children:[(0,t.jsx)("option",{value:"",children:"Select industry..."}),z.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"input-label",children:"Status"}),(0,t.jsx)("select",{name:"status",value:ec.status,onChange:e_,className:"input",children:D.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"input-label",children:"Country"}),(0,t.jsx)("input",{type:"text",name:"country",value:ec.country,onChange:e_,placeholder:"e.g., South Africa",className:"input"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"input-label",children:"City"}),(0,t.jsx)("input",{type:"text",name:"city",value:ec.city,onChange:e_,placeholder:"e.g., Johannesburg",className:"input"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"input-label",children:"Email"}),(0,t.jsx)("input",{type:"email",name:"email",value:ec.email,onChange:e_,className:"input"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"input-label",children:"Phone"}),(0,t.jsx)("input",{type:"tel",name:"phone",value:ec.phone,onChange:e_,className:"input"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"input-label",children:"Website"}),(0,t.jsx)("input",{type:"url",name:"website",value:ec.website,onChange:e_,placeholder:"https://...",className:"input"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"input-label",children:"Lead Source"}),(0,t.jsxs)("select",{name:"lead_source",value:ec.lead_source,onChange:e_,className:"input",children:[(0,t.jsx)("option",{value:"",children:"Select source..."}),O.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"input-label",children:"Referred By"}),(0,t.jsx)("input",{type:"text",name:"referred_by",value:ec.referred_by,onChange:e_,className:"input"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"input-label",children:"Notes"}),(0,t.jsx)("textarea",{name:"notes",value:ec.notes,onChange:e_,rows:3,className:"input resize-none"})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-end gap-3 px-6 py-4 border-t border-border bg-surface-secondary",children:[(0,t.jsx)("button",{type:"button",onClick:eC,className:"btn-secondary",disabled:ea,children:"Cancel"}),(0,t.jsx)("button",{type:"submit",className:"btn-primary",disabled:ea||en,children:ea?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Z,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):en?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(k.Z,{className:"w-4 h-4"}),"Saved!"]}):"Save Changes"})]})]})]})]})}),em&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,t.jsxs)("div",{className:"flex min-h-full items-center justify-center p-4",children:[(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 transition-opacity",onClick:eP}),(0,t.jsxs)("div",{className:"relative bg-surface-primary rounded-xl shadow-modal w-full max-w-lg max-h-[90vh] overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-border",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-lg bg-jasper-emerald/10 flex items-center justify-center",children:(0,t.jsx)(M.Z,{className:"w-5 h-5 text-jasper-emerald"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-jasper-carbon",children:"Add Contact"}),(0,t.jsxs)("p",{className:"text-sm text-jasper-slate",children:["Add a new contact to ",s.name]})]})]}),(0,t.jsx)("button",{onClick:eP,className:"p-2 hover:bg-surface-secondary rounded-lg transition-colors",children:(0,t.jsx)(P.Z,{className:"w-5 h-5 text-jasper-slate"})})]}),(0,t.jsxs)("form",{onSubmit:eS,className:"overflow-y-auto max-h-[calc(90vh-140px)]",children:[(0,t.jsxs)("div",{className:"p-6 space-y-4",children:[eu&&(0,t.jsxs)("div",{className:"flex items-center gap-3 p-4 bg-green-50 border border-green-200 rounded-lg",children:[(0,t.jsx)(k.Z,{className:"w-5 h-5 text-green-600"}),(0,t.jsx)("span",{className:"text-sm text-green-800",children:"Contact added successfully!"})]}),ep&&(0,t.jsxs)("div",{className:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 rounded-lg",children:[(0,t.jsx)(m.Z,{className:"w-5 h-5 text-red-600"}),(0,t.jsx)("span",{className:"text-sm text-red-800",children:ep})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"input-label",children:["First Name ",(0,t.jsx)("span",{className:"text-status-error",children:"*"})]}),(0,t.jsx)("input",{type:"text",name:"first_name",value:ef.first_name,onChange:eZ,className:"input",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"input-label",children:"Last Name"}),(0,t.jsx)("input",{type:"text",name:"last_name",value:ef.last_name,onChange:eZ,className:"input"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"input-label",children:["Email ",(0,t.jsx)("span",{className:"text-status-error",children:"*"})]}),(0,t.jsx)("input",{type:"email",name:"email",value:ef.email,onChange:eZ,className:"input",required:!0})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"input-label",children:"Phone"}),(0,t.jsx)("input",{type:"tel",name:"phone",value:ef.phone,onChange:eZ,className:"input"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"input-label",children:"Job Title"}),(0,t.jsx)("input",{type:"text",name:"job_title",value:ef.job_title,onChange:eZ,className:"input"})]})]}),(0,t.jsxs)("div",{className:"flex gap-6",children:[(0,t.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",name:"is_primary",checked:ef.is_primary,onChange:eZ,className:"w-4 h-4 rounded border-border text-jasper-emerald focus:ring-jasper-emerald"}),(0,t.jsx)("span",{className:"text-sm text-jasper-carbon",children:"Primary Contact"})]}),(0,t.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",name:"is_decision_maker",checked:ef.is_decision_maker,onChange:eZ,className:"w-4 h-4 rounded border-border text-jasper-emerald focus:ring-jasper-emerald"}),(0,t.jsx)("span",{className:"text-sm text-jasper-carbon",children:"Decision Maker"})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-end gap-3 px-6 py-4 border-t border-border bg-surface-secondary",children:[(0,t.jsx)("button",{type:"button",onClick:eP,className:"btn-secondary",disabled:ex,children:"Cancel"}),(0,t.jsx)("button",{type:"submit",className:"btn-primary",disabled:ex||eu,children:ex?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Z,{className:"w-4 h-4 animate-spin"}),"Adding..."]}):eu?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(k.Z,{className:"w-4 h-4"}),"Added!"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(_.Z,{className:"w-4 h-4"}),"Add Contact"]})})]})]})]})]})})]})}function B(e){let{icon:s,label:a,value:l,href:r,external:n}=e,i=(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-lg bg-surface-secondary flex items-center justify-center flex-shrink-0",children:(0,t.jsx)(s,{className:"w-5 h-5 text-jasper-emerald"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-jasper-slate",children:a}),(0,t.jsxs)("p",{className:(0,F.cn)("font-medium",r?"text-jasper-emerald hover:underline":"text-jasper-carbon"),children:[l,n&&(0,t.jsx)(I.Z,{className:"w-3 h-3 inline ml-1"})]})]})]});return r?(0,t.jsx)("a",{href:r,target:n?"_blank":void 0,rel:n?"noopener noreferrer":void 0,children:i}):i}}},function(e){e.O(0,[145,197,828,797,412,766,213,605,597,971,117,744],function(){return e(e.s=8768)}),_N_E=e.O()}]);