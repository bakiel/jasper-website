"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[213],{5213:function(e,a,r){r.d(a,{AuthenticatedLayout:function(){return f}});var s=r(7437),t=r(2265),n=r(9376),l=r(1359),i=r(7766),o=r(6283),c=r(9399),d=r(5359);let u=[{id:1,title:"Company Information",description:"Tell us about your company"},{id:2,title:"Project Details",description:"Describe your project"},{id:3,title:"Funding Requirements",description:"Your funding needs"},{id:4,title:"Documents Available",description:"Documentation status"},{id:5,title:"Impact & ESG",description:"Social and environmental impact"},{id:6,title:"Additional Information",description:"Any other details"}],m=[{value:"sdg1",label:"SDG 1: No Poverty"},{value:"sdg2",label:"SDG 2: Zero Hunger"},{value:"sdg3",label:"SDG 3: Good Health"},{value:"sdg4",label:"SDG 4: Quality Education"},{value:"sdg5",label:"SDG 5: Gender Equality"},{value:"sdg6",label:"SDG 6: Clean Water"},{value:"sdg7",label:"SDG 7: Affordable Energy"},{value:"sdg8",label:"SDG 8: Decent Work"},{value:"sdg9",label:"SDG 9: Industry & Innovation"},{value:"sdg10",label:"SDG 10: Reduced Inequalities"},{value:"sdg11",label:"SDG 11: Sustainable Cities"},{value:"sdg12",label:"SDG 12: Responsible Consumption"},{value:"sdg13",label:"SDG 13: Climate Action"},{value:"sdg14",label:"SDG 14: Life Below Water"},{value:"sdg15",label:"SDG 15: Life on Land"},{value:"sdg16",label:"SDG 16: Peace & Justice"},{value:"sdg17",label:"SDG 17: Partnerships"}],p=["IFC (World Bank)","African Development Bank (AfDB)","Development Bank of Southern Africa (DBSA)","Industrial Development Corporation (IDC)","European Investment Bank (EIB)","German Development Bank (KfW)","French Development Agency (AFD)","UK CDC","US DFC","Other"];function x(e){let{isOpen:a,onComplete:r}=e,[n,l]=(0,t.useState)(1),[i,o]=(0,t.useState)(!1),[c,x]=(0,t.useState)(null),[h,g]=(0,t.useState)({company_description:"",years_in_operation:void 0,employee_count:"",annual_revenue_range:"",project_name:"",project_description:"",project_location:"",project_value_estimate:void 0,project_timeline:void 0,project_readiness:void 0,funding_status:void 0,funding_amount_required:void 0,dfi_experience:!1,previous_dfi_partners:[],preferred_dfis:[],has_business_plan:!1,has_financial_statements:!1,has_feasibility_study:!1,has_environmental_assessment:!1,has_legal_documentation:!1,additional_documents:"",jobs_to_be_created:void 0,sdg_alignment:[],environmental_benefits:"",social_impact_description:"",challenges_faced:"",specific_assistance_needed:"",how_did_you_hear:"",additional_comments:"",completed:!1});(0,t.useEffect)(()=>{a&&f()},[a]);let f=async()=>{try{let e=await d.f$.get();e&&g({...h,...e})}catch(e){}},b=(e,a)=>{g(r=>({...r,[e]:a}))},j=(e,a)=>{g(r=>{let s=r[e]||[];return s.includes(a)?{...r,[e]:s.filter(e=>e!==a)}:{...r,[e]:[...s,a]}})},v=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];o(!0),x(null);try{let a={...h,completed:e};await d.f$.save(a),e&&r()}catch(e){x(e.message||"Failed to save questionnaire")}finally{o(!1)}},y=async()=>{await v(!1),n<u.length&&l(n+1)},N=async()=>{await v(!0)};return a?(0,s.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,s.jsxs)("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[(0,s.jsx)("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-75 transition-opacity"}),(0,s.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-3xl sm:w-full",children:[(0,s.jsxs)("div",{className:"bg-jasper-navy px-6 py-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Client Intake Questionnaire"}),(0,s.jsx)("p",{className:"text-sm text-gray-300 mt-1",children:"Help us understand your needs better"})]}),(0,s.jsx)("div",{className:"flex items-center space-x-2",children:(0,s.jsxs)("span",{className:"text-sm text-gray-300",children:["Step ",n," of ",u.length]})})]}),(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("div",{className:"flex space-x-2",children:u.map(e=>(0,s.jsx)("div",{className:"flex-1 h-2 rounded-full transition-colors ".concat(e.id<=n?"bg-jasper-emerald":"bg-gray-600")},e.id))}),(0,s.jsx)("p",{className:"text-white mt-2 font-medium",children:u[n-1].title}),(0,s.jsx)("p",{className:"text-gray-300 text-sm",children:u[n-1].description})]})]}),(0,s.jsxs)("div",{className:"px-6 py-6 max-h-[60vh] overflow-y-auto",children:[c&&(0,s.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:c}),1===n&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Description"}),(0,s.jsx)("textarea",{value:h.company_description||"",onChange:e=>b("company_description",e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-jasper-emerald focus:border-transparent",placeholder:"Brief description of your company and its main activities..."})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Years in Operation"}),(0,s.jsx)("input",{type:"number",value:h.years_in_operation||"",onChange:e=>b("years_in_operation",e.target.value?parseInt(e.target.value):void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-jasper-emerald focus:border-transparent",placeholder:"e.g. 5"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Number of Employees"}),(0,s.jsxs)("select",{value:h.employee_count||"",onChange:e=>b("employee_count",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-jasper-emerald focus:border-transparent",children:[(0,s.jsx)("option",{value:"",children:"Select range"}),(0,s.jsx)("option",{value:"1-10",children:"1-10"}),(0,s.jsx)("option",{value:"11-50",children:"11-50"}),(0,s.jsx)("option",{value:"51-200",children:"51-200"}),(0,s.jsx)("option",{value:"201-500",children:"201-500"}),(0,s.jsx)("option",{value:"500+",children:"500+"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Annual Revenue Range (USD)"}),(0,s.jsxs)("select",{value:h.annual_revenue_range||"",onChange:e=>b("annual_revenue_range",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-jasper-emerald focus:border-transparent",children:[(0,s.jsx)("option",{value:"",children:"Select range"}),(0,s.jsx)("option",{value:"< $100K",children:"Less than $100,000"}),(0,s.jsx)("option",{value:"$100K - $500K",children:"$100,000 - $500,000"}),(0,s.jsx)("option",{value:"$500K - $1M",children:"$500,000 - $1 million"}),(0,s.jsx)("option",{value:"$1M - $5M",children:"$1 million - $5 million"}),(0,s.jsx)("option",{value:"$5M - $10M",children:"$5 million - $10 million"}),(0,s.jsx)("option",{value:"$10M - $50M",children:"$10 million - $50 million"}),(0,s.jsx)("option",{value:"> $50M",children:"More than $50 million"})]})]})]}),2===n&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Project Name"}),(0,s.jsx)("input",{type:"text",value:h.project_name||"",onChange:e=>b("project_name",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-jasper-emerald focus:border-transparent",placeholder:"e.g. Solar Farm Development Phase 1"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Project Description"}),(0,s.jsx)("textarea",{value:h.project_description||"",onChange:e=>b("project_description",e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-jasper-emerald focus:border-transparent",placeholder:"Describe the project scope, objectives, and expected outcomes..."})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Project Location"}),(0,s.jsx)("input",{type:"text",value:h.project_location||"",onChange:e=>b("project_location",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-jasper-emerald focus:border-transparent",placeholder:"e.g. Gauteng, South Africa"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estimated Project Value (USD)"}),(0,s.jsx)("input",{type:"number",value:h.project_value_estimate||"",onChange:e=>b("project_value_estimate",e.target.value?parseInt(e.target.value):void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-jasper-emerald focus:border-transparent",placeholder:"e.g. 5000000"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Project Timeline"}),(0,s.jsxs)("select",{value:h.project_timeline||"",onChange:e=>b("project_timeline",e.target.value||void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-jasper-emerald focus:border-transparent",children:[(0,s.jsx)("option",{value:"",children:"Select timeline"}),(0,s.jsx)("option",{value:"urgent",children:"Urgent (less than 1 month)"}),(0,s.jsx)("option",{value:"short",children:"Short (1-3 months)"}),(0,s.jsx)("option",{value:"medium",children:"Medium (3-6 months)"}),(0,s.jsx)("option",{value:"long",children:"Long (6-12 months)"}),(0,s.jsx)("option",{value:"flexible",children:"Flexible (no specific timeline)"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Project Readiness"}),(0,s.jsxs)("select",{value:h.project_readiness||"",onChange:e=>b("project_readiness",e.target.value||void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-jasper-emerald focus:border-transparent",children:[(0,s.jsx)("option",{value:"",children:"Select readiness level"}),(0,s.jsx)("option",{value:"concept",children:"Concept - Just an idea"}),(0,s.jsx)("option",{value:"feasibility",children:"Feasibility - Doing feasibility studies"}),(0,s.jsx)("option",{value:"planning",children:"Planning - Detailed planning stage"}),(0,s.jsx)("option",{value:"ready_for_funding",children:"Ready for Funding - Ready to approach funders"}),(0,s.jsx)("option",{value:"implementation",children:"Implementation - Already implementing"})]})]})]})]}),3===n&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Funding Status"}),(0,s.jsxs)("select",{value:h.funding_status||"",onChange:e=>b("funding_status",e.target.value||void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-jasper-emerald focus:border-transparent",children:[(0,s.jsx)("option",{value:"",children:"Select status"}),(0,s.jsx)("option",{value:"self_funded",children:"Self-funded"}),(0,s.jsx)("option",{value:"seeking_funding",children:"Seeking funding"}),(0,s.jsx)("option",{value:"partially_funded",children:"Partially funded"}),(0,s.jsx)("option",{value:"fully_funded",children:"Fully funded"}),(0,s.jsx)("option",{value:"not_applicable",children:"Not applicable"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Funding Amount Required (USD)"}),(0,s.jsx)("input",{type:"number",value:h.funding_amount_required||"",onChange:e=>b("funding_amount_required",e.target.value?parseInt(e.target.value):void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-jasper-emerald focus:border-transparent",placeholder:"e.g. 2000000"})]})]}),(0,s.jsx)("div",{children:(0,s.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",checked:h.dfi_experience||!1,onChange:e=>b("dfi_experience",e.target.checked),className:"w-4 h-4 text-jasper-emerald border-gray-300 rounded focus:ring-jasper-emerald"}),(0,s.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Has your company worked with Development Finance Institutions (DFIs) before?"})]})}),h.dfi_experience&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Previous DFI Partners (select all that apply)"}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-2",children:p.map(e=>(0,s.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",checked:(h.previous_dfi_partners||[]).includes(e),onChange:()=>j("previous_dfi_partners",e),className:"w-4 h-4 text-jasper-emerald border-gray-300 rounded focus:ring-jasper-emerald"}),(0,s.jsx)("span",{className:"text-sm text-gray-700",children:e})]},e))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preferred DFIs to Target (select all that apply)"}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-2",children:p.map(e=>(0,s.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",checked:(h.preferred_dfis||[]).includes(e),onChange:()=>j("preferred_dfis",e),className:"w-4 h-4 text-jasper-emerald border-gray-300 rounded focus:ring-jasper-emerald"}),(0,s.jsx)("span",{className:"text-sm text-gray-700",children:e})]},e))})]})]}),4===n&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Please indicate which documents you currently have available. This helps us understand your readiness level and what support you may need."}),(0,s.jsx)("div",{className:"space-y-3",children:[{field:"has_business_plan",label:"Business Plan"},{field:"has_financial_statements",label:"Financial Statements (last 3 years)"},{field:"has_feasibility_study",label:"Feasibility Study"},{field:"has_environmental_assessment",label:"Environmental Impact Assessment"},{field:"has_legal_documentation",label:"Legal Documentation (incorporation, permits, etc.)"}].map(e=>{let{field:a,label:r}=e;return(0,s.jsxs)("label",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors",children:[(0,s.jsx)("input",{type:"checkbox",checked:h[a]||!1,onChange:e=>b(a,e.target.checked),className:"w-5 h-5 text-jasper-emerald border-gray-300 rounded focus:ring-jasper-emerald"}),(0,s.jsx)("span",{className:"text-gray-700",children:r})]},a)})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Other Documents Available"}),(0,s.jsx)("textarea",{value:h.additional_documents||"",onChange:e=>b("additional_documents",e.target.value),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-jasper-emerald focus:border-transparent",placeholder:"List any other relevant documents you have..."})]})]}),5===n&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Jobs to be Created"}),(0,s.jsx)("input",{type:"number",value:h.jobs_to_be_created||"",onChange:e=>b("jobs_to_be_created",e.target.value?parseInt(e.target.value):void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-jasper-emerald focus:border-transparent",placeholder:"Estimated number of jobs"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"UN Sustainable Development Goals Alignment (select all that apply)"}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-2 max-h-48 overflow-y-auto p-2 bg-gray-50 rounded-lg",children:m.map(e=>(0,s.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",checked:(h.sdg_alignment||[]).includes(e.value),onChange:()=>j("sdg_alignment",e.value),className:"w-4 h-4 text-jasper-emerald border-gray-300 rounded focus:ring-jasper-emerald"}),(0,s.jsx)("span",{className:"text-sm text-gray-700",children:e.label})]},e.value))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Environmental Benefits"}),(0,s.jsx)("textarea",{value:h.environmental_benefits||"",onChange:e=>b("environmental_benefits",e.target.value),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-jasper-emerald focus:border-transparent",placeholder:"Describe any environmental benefits of your project..."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Social Impact Description"}),(0,s.jsx)("textarea",{value:h.social_impact_description||"",onChange:e=>b("social_impact_description",e.target.value),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-jasper-emerald focus:border-transparent",placeholder:"Describe the social impact of your project..."})]})]}),6===n&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Main Challenges Faced"}),(0,s.jsx)("textarea",{value:h.challenges_faced||"",onChange:e=>b("challenges_faced",e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-jasper-emerald focus:border-transparent",placeholder:"What are the main challenges you're currently facing?"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Specific Assistance Needed"}),(0,s.jsx)("textarea",{value:h.specific_assistance_needed||"",onChange:e=>b("specific_assistance_needed",e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-jasper-emerald focus:border-transparent",placeholder:"What specific assistance do you need from JASPER?"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"How Did You Hear About Us?"}),(0,s.jsxs)("select",{value:h.how_did_you_hear||"",onChange:e=>b("how_did_you_hear",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-jasper-emerald focus:border-transparent",children:[(0,s.jsx)("option",{value:"",children:"Select an option"}),(0,s.jsx)("option",{value:"website",children:"Website"}),(0,s.jsx)("option",{value:"referral",children:"Referral from a contact"}),(0,s.jsx)("option",{value:"linkedin",children:"LinkedIn"}),(0,s.jsx)("option",{value:"conference",children:"Conference/Event"}),(0,s.jsx)("option",{value:"search",children:"Search engine"}),(0,s.jsx)("option",{value:"other",children:"Other"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Additional Comments"}),(0,s.jsx)("textarea",{value:h.additional_comments||"",onChange:e=>b("additional_comments",e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-jasper-emerald focus:border-transparent",placeholder:"Any other information you'd like to share..."})]})]})]}),(0,s.jsxs)("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-between items-center",children:[(0,s.jsx)("div",{children:n>1&&(0,s.jsx)("button",{onClick:()=>{n>1&&l(n-1)},disabled:i,className:"px-4 py-2 text-gray-600 hover:text-gray-800 font-medium transition-colors",children:"Previous"})}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("button",{onClick:()=>v(!1),disabled:i,className:"px-4 py-2 text-jasper-emerald hover:text-jasper-emerald/80 font-medium transition-colors",children:i?"Saving...":"Save Progress"}),n<u.length?(0,s.jsx)("button",{onClick:y,disabled:i,className:"px-6 py-2 bg-jasper-emerald text-white rounded-lg hover:bg-jasper-emerald/90 font-medium transition-colors disabled:opacity-50",children:i?"Saving...":"Next"}):(0,s.jsx)("button",{onClick:N,disabled:i,className:"px-6 py-2 bg-jasper-emerald text-white rounded-lg hover:bg-jasper-emerald/90 font-medium transition-colors disabled:opacity-50",children:i?"Submitting...":"Submit Questionnaire"})]})]})]})]})}):null}let h=["/login","/intake"];function g(e){let{children:a}=e,r=(0,n.usePathname)(),{isLoading:l,isAuthenticated:o}=(0,i.a)(),u=h.some(e=>r===e||r.startsWith(e)),[m,p]=(0,t.useState)(!1),[g,f]=(0,t.useState)(!1);(0,t.useEffect)(()=>{o&&!g&&b()},[o,g]);let b=async()=>{try{(await d.f$.getStatus()).questionnaire_required&&p(!0)}catch(e){console.log("Questionnaire check skipped:",e)}finally{f(!0)}};return u?(0,s.jsx)(s.Fragment,{children:a}):l?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-surface-secondary",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-jasper-emerald mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-jasper-slate",children:"Loading..."})]})}):o?(0,s.jsxs)("div",{className:"flex min-h-screen",children:[(0,s.jsx)(c.Y,{}),(0,s.jsx)("main",{className:"flex-1 ml-0 lg:ml-64 transition-all duration-300 pt-14 lg:pt-0",children:a}),(0,s.jsx)(x,{isOpen:m,onComplete:()=>{p(!1)}})]}):(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-surface-secondary",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-jasper-emerald mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-jasper-slate",children:"Redirecting to login..."})]})})}function f(e){let{children:a}=e;return(0,s.jsx)(o.f,{children:(0,s.jsx)(l.QueryProvider,{children:(0,s.jsx)(i.AuthProvider,{children:(0,s.jsx)(g,{children:a})})})})}},9399:function(e,a,r){r.d(a,{Y:function(){return k}});var s=r(7437),t=r(7648),n=r(3145),l=r(9376),i=r(2265),o=r(5466),c=r(2051),d=r(5805),u=r(3417),m=r(8736),p=r(8728),x=r(5368),h=r(2369),g=r(7692),f=r(407),b=r(2451),j=r(6840),v=r(2489),y=r(3448),N=r(7766);let _=[{name:"Dashboard",href:"/",icon:o.Z},{name:"Projects",href:"/projects",icon:c.Z},{name:"Clients",href:"/clients",icon:d.Z},{name:"Messages",href:"/messages",icon:u.Z},{name:"Invoices",href:"/invoices",icon:m.Z}],w=[{name:"Settings",href:"/settings",icon:p.Z},{name:"Help",href:"/help",icon:x.Z}];function k(){let e=(0,l.usePathname)(),[a,r]=(0,i.useState)(!1),[o,c]=(0,i.useState)(!1),{user:d,logout:u}=(0,N.a)();(0,i.useEffect)(()=>{c(!1)},[e]),(0,i.useEffect)(()=>(o?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[o]);let m=(0,s.jsxs)("div",{className:"flex flex-col h-full",children:[(0,s.jsx)("div",{className:"flex items-center h-16 px-6 border-b border-border",children:(0,s.jsxs)(t.default,{href:"/",className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 relative flex-shrink-0",children:(0,s.jsx)(n.default,{src:"/images/jasper-icon.png",alt:"JASPER",fill:!0,className:"object-contain",priority:!0})}),!a&&(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("span",{className:"font-bold text-jasper-navy text-lg leading-tight tracking-tight",children:"JASPER"}),(0,s.jsx)("span",{className:"text-[10px] text-jasper-slate -mt-0.5 uppercase tracking-wider",children:"Financial Architecture"})]})]})}),(0,s.jsx)("nav",{className:"flex-1 px-3 py-4 space-y-1 overflow-y-auto",children:_.map(r=>{let n=e===r.href||"/"!==r.href&&e.startsWith(r.href);return(0,s.jsxs)(t.default,{href:r.href,className:(0,y.cn)("nav-item",n&&"nav-item-active"),title:a?r.name:void 0,children:[(0,s.jsx)(r.icon,{className:"w-5 h-5 flex-shrink-0"}),!a&&(0,s.jsx)("span",{children:r.name})]},r.name)})}),(0,s.jsxs)("div",{className:"px-3 py-4 border-t border-border space-y-1",children:[d&&!a&&(0,s.jsx)("div",{className:"px-3 py-2 mb-2",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-full bg-jasper-emerald/10 flex items-center justify-center",children:(0,s.jsx)(h.Z,{className:"w-4 h-4 text-jasper-emerald"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("p",{className:"text-sm font-medium text-jasper-carbon truncate",children:[d.first_name," ",d.last_name]}),(0,s.jsx)("p",{className:"text-xs text-jasper-slate truncate capitalize",children:d.role.replace("_"," ")})]})]})}),w.map(r=>{let n=e===r.href;return(0,s.jsxs)(t.default,{href:r.href,className:(0,y.cn)("nav-item",n&&"nav-item-active"),title:a?r.name:void 0,children:[(0,s.jsx)(r.icon,{className:"w-5 h-5 flex-shrink-0"}),!a&&(0,s.jsx)("span",{children:r.name})]},r.name)}),(0,s.jsxs)("button",{onClick:u,className:"nav-item w-full text-left text-status-error hover:bg-status-error/10 hover:text-status-error",title:a?"Logout":void 0,children:[(0,s.jsx)(g.Z,{className:"w-5 h-5 flex-shrink-0"}),!a&&(0,s.jsx)("span",{children:"Logout"})]})]}),(0,s.jsx)("button",{onClick:()=>r(!a),className:"absolute -right-3 top-20 w-6 h-6 bg-surface-primary border border-border rounded-full items-center justify-center shadow-sm hover:bg-surface-secondary transition-colors hidden lg:flex",children:a?(0,s.jsx)(f.Z,{className:"w-4 h-4 text-jasper-slate"}):(0,s.jsx)(b.Z,{className:"w-4 h-4 text-jasper-slate"})})]});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:()=>c(!0),className:"fixed top-4 left-4 z-50 lg:hidden p-2 bg-surface-primary border border-border rounded-lg shadow-sm hover:bg-surface-secondary transition-colors","aria-label":"Open menu",children:(0,s.jsx)(j.Z,{className:"w-5 h-5 text-jasper-carbon"})}),o&&(0,s.jsx)("div",{className:"fixed inset-0 z-40 bg-black/50 lg:hidden",onClick:()=>c(!1)}),(0,s.jsxs)("aside",{className:(0,y.cn)("fixed left-0 top-0 z-50 h-screen w-64 bg-surface-primary border-r border-border transition-transform duration-300 lg:hidden",o?"translate-x-0":"-translate-x-full"),children:[(0,s.jsx)("button",{onClick:()=>c(!1),className:"absolute top-4 right-4 p-2 hover:bg-surface-secondary rounded-lg transition-colors","aria-label":"Close menu",children:(0,s.jsx)(v.Z,{className:"w-5 h-5 text-jasper-slate"})}),m]}),(0,s.jsx)("aside",{className:(0,y.cn)("fixed left-0 top-0 z-40 h-screen bg-surface-primary border-r border-border transition-all duration-300 hidden lg:block",a?"w-20":"w-64"),children:m})]})}},1359:function(e,a,r){r.d(a,{QueryProvider:function(){return i}});var s=r(7437),t=r(946),n=r(9827),l=r(2265);function i(e){let{children:a}=e,[r]=(0,l.useState)(()=>new t.S({defaultOptions:{queries:{staleTime:6e4,gcTime:3e5,refetchOnWindowFocus:!1,retry:1}}}));return(0,s.jsx)(n.aH,{client:r,children:a})}},6283:function(e,a,r){r.d(a,{F:function(){return i},f:function(){return l}});var s=r(7437),t=r(2265);let n=(0,t.createContext)(void 0);function l(e){let{children:a}=e,[r,l]=(0,t.useState)("system"),[i,o]=(0,t.useState)("light"),[c,d]=(0,t.useState)(!1),u=()=>window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",m=e=>{let a=document.documentElement,r="system"===e?u():e;a.classList.remove("light","dark"),a.classList.add(r),o(r)};return((0,t.useEffect)(()=>{let e=localStorage.getItem("jasper-theme")||"system";l(e),m(e),d(!0)},[]),(0,t.useEffect)(()=>{if("system"!==r)return;let e=window.matchMedia("(prefers-color-scheme: dark)"),a=()=>m("system");return e.addEventListener("change",a),()=>e.removeEventListener("change",a)},[r]),c)?(0,s.jsx)(n.Provider,{value:{theme:r,resolvedTheme:i,setTheme:e=>{l(e),localStorage.setItem("jasper-theme",e),m(e)}},children:a}):null}function i(){let e=(0,t.useContext)(n);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}},3448:function(e,a,r){r.d(a,{IS:function(){return u},Qm:function(){return m},cn:function(){return n},im:function(){return d},p6:function(){return i},ul:function(){return o},xG:function(){return l},z2:function(){return c}});var s=r(1994),t=r(3335);function n(){for(var e=arguments.length,a=Array(e),r=0;r<e;r++)a[r]=arguments[r];return(0,t.m6)((0,s.W)(a))}function l(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return new Intl.NumberFormat("en-US",{style:"currency",currency:a,minimumFractionDigits:0,maximumFractionDigits:0}).format(e/100)}function i(e){let a=new Date(e);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(a)}function o(e){return({inquiry:"stage-inquiry",proposal:"stage-proposal",negotiation:"stage-negotiation",contracted:"stage-contracted",discovery:"stage-contracted",in_progress:"stage-in-progress",review:"stage-in-progress",revision:"stage-in-progress",completed:"stage-completed",on_hold:"badge-warning",cancelled:"badge-error"})[e]||"badge-neutral"}function c(e){return({draft:"badge-neutral",sent:"badge-info",viewed:"badge-info",paid:"badge-success",overdue:"badge-error",cancelled:"badge-neutral"})[e]||"badge-neutral"}function d(e){return e.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}function u(e){return({starter:"Starter",growth:"Growth",scale:"Scale",enterprise:"Enterprise",custom:"Custom"})[e]||e}function m(e){return e.split(" ").map(e=>e.charAt(0).toUpperCase()).slice(0,2).join("")}}}]);