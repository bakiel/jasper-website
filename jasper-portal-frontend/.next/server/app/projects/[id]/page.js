(()=>{var e={};e.id=948,e.ids=[948],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5315:e=>{"use strict";e.exports=require("path")},7360:e=>{"use strict";e.exports=require("url")},1637:(e,a,s)=>{"use strict";s.r(a),s.d(a,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>m,pages:()=>o,routeModule:()=>x,tree:()=>d}),s(8231),s(5280),s(5866);var t=s(3191),l=s(8716),r=s(7922),n=s.n(r),i=s(5231),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);s.d(a,c);let d=["",{children:["projects",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,8231)),"/Users/mac/Downloads/jasper-financial-architecture/jasper-portal-frontend/src/app/projects/[id]/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,1150))).default(e)],apple:[async e=>(await Promise.resolve().then(s.bind(s,3601))).default(e)],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,5280)),"/Users/mac/Downloads/jasper-financial-architecture/jasper-portal-frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,1150))).default(e)],apple:[async e=>(await Promise.resolve().then(s.bind(s,3601))).default(e)],openGraph:[],twitter:[],manifest:void 0}}],o=["/Users/mac/Downloads/jasper-financial-architecture/jasper-portal-frontend/src/app/projects/[id]/page.tsx"],m="/projects/[id]/page",p={require:s,loadChunk:()=>Promise.resolve()},x=new t.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/projects/[id]/page",pathname:"/projects/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},3778:(e,a,s)=>{Promise.resolve().then(s.bind(s,9362))},6333:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});let t=(0,s(2881).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},7358:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});let t=(0,s(2881).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},1291:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});let t=(0,s(2881).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},6307:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});let t=(0,s(2881).Z)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},8998:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});let t=(0,s(2881).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},1540:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});let t=(0,s(2881).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},9508:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});let t=(0,s(2881).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},3685:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});let t=(0,s(2881).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},9362:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>O});var t=s(326),l=s(7577),r=s(5047),n=s(434),i=s(1012),c=s(6283),d=s(2881);let o=(0,d.Z)("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]),m=(0,d.Z)("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]),p=(0,d.Z)("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);var x=s(7506),u=s(3685),h=s(1291),j=s(4019);let g=(0,d.Z)("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);var v=s(1540);let b=(0,d.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var f=s(2017),y=s(1223);let N={pdf:c.Z,doc:c.Z,docx:c.Z,xls:o,xlsx:o,csv:o,png:m,jpg:m,jpeg:m,gif:m},_={proposal:"Proposal",financial_model:"Financial Model",business_plan:"Business Plan",pitch_deck:"Pitch Deck",executive_summary:"Executive Summary",due_diligence:"Due Diligence",invoice:"Invoice",contract:"Contract",nda:"NDA",company_registration:"Company Registration",financial_statements:"Financial Statements",tax_documents:"Tax Documents",id_documents:"ID Documents",other_client:"Client Document",other_deliverable:"Deliverable"};function w({projectId:e,documents:a,onDocumentsChange:s,isAdmin:r=!0}){let[n,i]=(0,l.useState)(!1),[c,d]=(0,l.useState)(null),[o,m]=(0,l.useState)(null),[v,b]=(0,l.useState)(null),[_,w]=(0,l.useState)(!1),D=(0,l.useRef)(null),[P,C]=(0,l.useState)("other_client"),[Z,S]=(0,l.useState)(""),F=(0,l.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?w(!0):"dragleave"===e.type&&w(!1)},[]),M=(0,l.useCallback)(async e=>{e.preventDefault(),e.stopPropagation(),w(!1);let a=e.dataTransfer.files;a&&a.length>0&&await A(a[0])},[e,P,Z]),q=async e=>{let a=e.target.files;a&&a.length>0&&await A(a[0]),D.current&&(D.current.value="")},A=async a=>{m(null),i(!0),d(`Uploading ${a.name}...`);try{let t=new FormData;t.append("file",a),t.append("project_id",e.toString()),t.append("document_type",P),t.append("uploaded_by","admin"),t.append("is_client_upload","false"),Z&&t.append("description",Z),await f.Tg.upload(t),d(null),S(""),s()}catch(e){m(e instanceof Error?e.message:"Upload failed")}finally{i(!1),d(null)}},I=async e=>{if(confirm("Are you sure you want to delete this document?")){b(e);try{await f.Tg.delete(e),s()}catch(e){m(e instanceof Error?e.message:"Delete failed")}finally{b(null)}}},T=e=>{let a=f.Tg.download(e.id);window.open(a,"_blank")},R=e=>{if(0===e)return"0 B";let a=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,a)).toFixed(1))+" "+["B","KB","MB","GB"][a]},E=e=>N[e.toLowerCase()]||p,B=a.filter(e=>["proposal","financial_model","business_plan","pitch_deck","executive_summary","due_diligence","invoice","other_deliverable"].includes(e.document_type)),U=a.filter(e=>!B.includes(e));return(0,t.jsxs)("div",{className:"space-y-6",children:[r&&(0,t.jsxs)("div",{className:"card",children:[t.jsx("div",{className:"card-header",children:t.jsx("h3",{className:"font-semibold text-jasper-carbon",children:"Upload Document"})}),(0,t.jsxs)("div",{className:"card-body space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-jasper-carbon mb-1",children:"Document Type"}),(0,t.jsxs)("select",{value:P,onChange:e=>C(e.target.value),className:"input w-full",children:[(0,t.jsxs)("optgroup",{label:"Deliverables",children:[t.jsx("option",{value:"proposal",children:"Proposal"}),t.jsx("option",{value:"financial_model",children:"Financial Model"}),t.jsx("option",{value:"business_plan",children:"Business Plan"}),t.jsx("option",{value:"pitch_deck",children:"Pitch Deck"}),t.jsx("option",{value:"executive_summary",children:"Executive Summary"}),t.jsx("option",{value:"due_diligence",children:"Due Diligence Report"}),t.jsx("option",{value:"invoice",children:"Invoice"}),t.jsx("option",{value:"other_deliverable",children:"Other Deliverable"})]}),(0,t.jsxs)("optgroup",{label:"Client Documents",children:[t.jsx("option",{value:"company_registration",children:"Company Registration"}),t.jsx("option",{value:"financial_statements",children:"Financial Statements"}),t.jsx("option",{value:"tax_documents",children:"Tax Documents"}),t.jsx("option",{value:"id_documents",children:"ID Documents"}),t.jsx("option",{value:"contract",children:"Contract"}),t.jsx("option",{value:"nda",children:"NDA"}),t.jsx("option",{value:"other_client",children:"Other Document"})]})]})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-jasper-carbon mb-1",children:"Description (optional)"}),t.jsx("input",{type:"text",value:Z,onChange:e=>S(e.target.value),placeholder:"Brief description...",className:"input w-full"})]})]}),(0,t.jsxs)("div",{onDragEnter:F,onDragLeave:F,onDragOver:F,onDrop:M,onClick:()=>D.current?.click(),className:(0,y.cn)("border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-all",_?"border-jasper-emerald bg-jasper-emerald/5":"border-border hover:border-jasper-emerald/50 hover:bg-surface-secondary"),children:[t.jsx("input",{ref:D,type:"file",className:"hidden",onChange:q,accept:".pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.png,.jpg,.jpeg,.gif,.txt,.csv"}),n?(0,t.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[t.jsx(x.Z,{className:"w-8 h-8 text-jasper-emerald animate-spin"}),t.jsx("p",{className:"text-sm text-jasper-slate",children:c})]}):(0,t.jsxs)(t.Fragment,{children:[t.jsx(u.Z,{className:"w-8 h-8 text-jasper-slate mx-auto mb-2"}),t.jsx("p",{className:"text-sm text-jasper-carbon font-medium",children:_?"Drop file here":"Click or drag file to upload"}),t.jsx("p",{className:"text-xs text-jasper-slate mt-1",children:"PDF, Word, Excel, PowerPoint, Images (max 50MB)"})]})]}),o&&(0,t.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-red-50 text-red-700 rounded-lg text-sm",children:[t.jsx(h.Z,{className:"w-4 h-4 flex-shrink-0"}),t.jsx("span",{children:o}),t.jsx("button",{onClick:()=>m(null),className:"ml-auto",children:t.jsx(j.Z,{className:"w-4 h-4"})})]})]})]}),(0,t.jsxs)("div",{className:"card",children:[t.jsx("div",{className:"card-header flex items-center justify-between",children:(0,t.jsxs)("h3",{className:"font-semibold text-jasper-carbon",children:["Deliverables",(0,t.jsxs)("span",{className:"ml-2 text-sm font-normal text-jasper-slate",children:["(",B.length,")"]})]})}),0===B.length?(0,t.jsxs)("div",{className:"p-8 text-center text-jasper-slate",children:[t.jsx(g,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),t.jsx("p",{className:"text-sm",children:"No deliverables uploaded yet"})]}):t.jsx("div",{className:"divide-y divide-border",children:B.map(e=>t.jsx(k,{document:e,onDownload:()=>T(e),onDelete:()=>I(e.id),deleting:v===e.id,isAdmin:r,formatFileSize:R,getFileIcon:E},e.id))})]}),(0,t.jsxs)("div",{className:"card",children:[t.jsx("div",{className:"card-header flex items-center justify-between",children:(0,t.jsxs)("h3",{className:"font-semibold text-jasper-carbon",children:["Client Documents",(0,t.jsxs)("span",{className:"ml-2 text-sm font-normal text-jasper-slate",children:["(",U.length,")"]})]})}),0===U.length?(0,t.jsxs)("div",{className:"p-8 text-center text-jasper-slate",children:[t.jsx(g,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),t.jsx("p",{className:"text-sm",children:"No client documents uploaded yet"})]}):t.jsx("div",{className:"divide-y divide-border",children:U.map(e=>t.jsx(k,{document:e,onDownload:()=>T(e),onDelete:()=>I(e.id),deleting:v===e.id,isAdmin:r,formatFileSize:R,getFileIcon:E},e.id))})]})]})}function k({document:e,onDownload:a,onDelete:s,deleting:l,isAdmin:r,formatFileSize:n,getFileIcon:i}){let c=i(e.file_extension);return(0,t.jsxs)("div",{className:"p-4 flex items-center gap-4 hover:bg-surface-secondary/50 transition-colors",children:[t.jsx("div",{className:"w-10 h-10 rounded-lg bg-surface-secondary flex items-center justify-center flex-shrink-0",children:t.jsx(c,{className:"w-5 h-5 text-jasper-emerald"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"font-medium text-jasper-carbon truncate",children:e.original_filename}),e.client_visible&&t.jsx("span",{className:"badge badge-success text-xs",children:"Visible"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 mt-1 text-xs text-jasper-slate",children:[t.jsx("span",{className:"badge badge-secondary",children:_[e.document_type]||e.document_type}),t.jsx("span",{children:n(e.file_size)}),t.jsx("span",{children:(0,y.p6)(e.uploaded_at)}),(0,t.jsxs)("span",{children:["by ",e.uploaded_by]})]}),e.description&&t.jsx("p",{className:"text-xs text-jasper-slate mt-1 truncate",children:e.description})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:a,className:"p-2 hover:bg-jasper-emerald/10 rounded-lg transition-colors group",title:"Download",children:t.jsx(v.Z,{className:"w-4 h-4 text-jasper-slate group-hover:text-jasper-emerald"})}),r&&t.jsx("button",{onClick:s,disabled:l,className:"p-2 hover:bg-red-50 rounded-lg transition-colors group disabled:opacity-50",title:"Delete",children:l?t.jsx(x.Z,{className:"w-4 h-4 text-red-500 animate-spin"}):t.jsx(b,{className:"w-4 h-4 text-jasper-slate group-hover:text-red-500"})})]})]})}var D=s(9213),P=s(6333),C=s(6307),Z=s(617),S=s(9508),F=s(1821),M=s(9734),q=s(7358),A=s(8998);let I=(0,d.Z)("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var T=s(9183),R=s(5265),E=s(361),B=s(4976);let U=[{value:"startup",label:"Start-Up Package",price:"R45,000 - R75,000"},{value:"growth",label:"Growth Package",price:"R150,000 - R350,000"},{value:"enterprise",label:"Enterprise Package",price:"R500,000 - R750,000"},{value:"custom",label:"Custom Package",price:"Custom pricing"}],z=["Agriculture","Energy & Power","Infrastructure","Manufacturing","Mining","Real Estate","Technology","Transportation","Water & Sanitation","Healthcare","Education","Financial Services","Other"],G=[{value:"ZAR",label:"ZAR - South African Rand"},{value:"USD",label:"USD - US Dollar"},{value:"EUR",label:"EUR - Euro"},{value:"GBP",label:"GBP - British Pound"}],H=[{key:"inquiry",label:"Inquiry"},{key:"qualify",label:"Qualify"},{key:"intake",label:"Intake"},{key:"proposal",label:"Proposal"},{key:"deposit",label:"Deposit"},{key:"production",label:"Production"},{key:"draft",label:"Draft"},{key:"final",label:"Final"}];function O(){let e=(0,r.useParams)();(0,r.useRouter)();let a=Number(e.id),[s,d]=(0,l.useState)(null),[o,m]=(0,l.useState)([]),[p,u]=(0,l.useState)([]),[v,b]=(0,l.useState)(!0),[N,_]=(0,l.useState)(!1),[k,O]=(0,l.useState)(null),[$,Q]=(0,l.useState)("overview"),[K,W]=(0,l.useState)(!1),[X,J]=(0,l.useState)(!1),[Y,ee]=(0,l.useState)(""),[ea,es]=(0,l.useState)(!1),[et,el]=(0,l.useState)({name:"",description:"",package:"",value:"",currency:"ZAR",target_completion:"",project_sector:"",project_location:"",funding_amount:"",target_dfis:""}),er=(0,B.NL)(),en=async()=>{try{let e=await f.Tg.listByProject(a);u(e.documents||[])}catch(e){console.error("Failed to fetch documents:",e)}},ei=async()=>{if(s){_(!0);try{let e=await f.qx.advanceStage(a);d(e)}catch(e){console.error("Failed to advance stage:",e)}finally{_(!1)}}},ec=async e=>{O(e.id);try{let s=await f.qx.updateMilestone(a,e.id,{completed:!e.completed});m(a=>a.map(a=>a.id===e.id?s:a));let t=await f.qx.get(a);d(t)}catch(e){console.error("Failed to update milestone:",e)}finally{O(null)}},ed=()=>{s&&(el({name:s.name||"",description:s.description||"",package:s.package||"",value:s.value||"",currency:s.currency||"ZAR",target_completion:s.target_completion?s.target_completion.split("T")[0]:"",project_sector:s.project_sector||"",project_location:s.project_location||"",funding_amount:s.funding_amount||"",target_dfis:s.target_dfis?.join(", ")||""}),ee(""),es(!1),W(!0))},eo=e=>{let{name:a,value:s}=e.target;el(e=>({...e,[a]:"value"===a||"funding_amount"===a?""===s?"":Number(s):s}))},em=async e=>{e.preventDefault(),J(!0),ee(""),es(!1);try{let e={name:et.name,description:et.description||null,package:et.package,value:et.value||null,currency:et.currency,target_completion:et.target_completion||null,project_sector:et.project_sector||null,project_location:et.project_location||null,funding_amount:et.funding_amount||null,target_dfis:et.target_dfis?et.target_dfis.split(",").map(e=>e.trim()).filter(e=>e):null},s=await f.qx.update(a,e);d(s),es(!0),er.invalidateQueries({queryKey:["projects"]}),setTimeout(()=>{W(!1),es(!1)},1500)}catch(e){console.error("Failed to update project:",e),ee(e.response?.data?.detail||"Failed to update project")}finally{J(!1)}},ep=()=>{X||(W(!1),ee(""),es(!1))},ex=s?H.findIndex(e=>e.key===s.stage):-1;if(v)return t.jsx("div",{className:"min-h-screen bg-surface-secondary flex items-center justify-center",children:t.jsx("div",{className:"animate-pulse text-jasper-slate",children:"Loading project..."})});if(!s)return t.jsx("div",{className:"min-h-screen bg-surface-secondary flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("p",{className:"text-jasper-slate mb-4",children:"Project not found"}),t.jsx(n.default,{href:"/projects",className:"btn-primary",children:"Back to Projects"})]})});let eu=o.filter(e=>e.completed).length,eh=o.length;return(0,t.jsxs)("div",{className:"min-h-screen bg-surface-secondary",children:[t.jsx(i.h4,{title:s.reference,subtitle:s.name}),(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsxs)(n.default,{href:"/projects",className:"inline-flex items-center gap-2 text-sm text-jasper-slate hover:text-jasper-carbon transition-colors",children:[t.jsx(P.Z,{className:"w-4 h-4"}),"Back to Projects"]}),t.jsx("div",{className:"card",children:t.jsx("div",{className:"card-body",children:t.jsx("div",{className:"flex items-center justify-between overflow-x-auto pb-2",children:H.map((e,a)=>{let s=a<ex,l=a===ex;return(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center min-w-[80px]",children:[t.jsx("div",{className:(0,y.cn)("w-8 h-8 rounded-full flex items-center justify-center text-xs font-medium transition-all",s&&"bg-jasper-emerald text-white",l&&"bg-jasper-emerald text-white ring-4 ring-jasper-emerald/20",a>ex&&"bg-surface-tertiary text-jasper-slate"),children:s?t.jsx(C.Z,{className:"w-4 h-4"}):a+1}),t.jsx("span",{className:(0,y.cn)("mt-2 text-xs font-medium whitespace-nowrap",l?"text-jasper-emerald":"text-jasper-slate"),children:e.label})]}),a<H.length-1&&t.jsx("div",{className:(0,y.cn)("w-12 h-0.5 mx-1",a<ex?"bg-jasper-emerald":"bg-surface-tertiary")})]},e.key)})})})}),(0,t.jsxs)("div",{className:"flex gap-1 border-b border-border",children:[t.jsx("button",{onClick:()=>Q("overview"),className:(0,y.cn)("px-4 py-2 text-sm font-medium border-b-2 transition-colors","overview"===$?"border-jasper-emerald text-jasper-emerald":"border-transparent text-jasper-slate hover:text-jasper-carbon"),children:"Overview"}),(0,t.jsxs)("button",{onClick:()=>Q("documents"),className:(0,y.cn)("px-4 py-2 text-sm font-medium border-b-2 transition-colors flex items-center gap-2","documents"===$?"border-jasper-emerald text-jasper-emerald":"border-transparent text-jasper-slate hover:text-jasper-carbon"),children:[t.jsx(g,{className:"w-4 h-4"}),"Documents",p.length>0&&t.jsx("span",{className:"badge badge-secondary text-xs",children:p.length})]}),(0,t.jsxs)("button",{onClick:()=>Q("messages"),className:(0,y.cn)("px-4 py-2 text-sm font-medium border-b-2 transition-colors flex items-center gap-2","messages"===$?"border-jasper-emerald text-jasper-emerald":"border-transparent text-jasper-slate hover:text-jasper-carbon"),children:[t.jsx(Z.Z,{className:"w-4 h-4"}),"Messages"]})]}),"overview"===$&&(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,t.jsxs)("div",{className:"card",children:[(0,t.jsxs)("div",{className:"card-header flex items-center justify-between",children:[t.jsx("h2",{className:"text-lg font-semibold text-jasper-carbon",children:"Project Overview"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:(0,y.cn)("badge text-sm",(0,y.ul)(s.stage)),children:(0,y.im)(s.stage)}),t.jsx("button",{onClick:ed,className:"p-2 hover:bg-surface-secondary rounded-lg transition-colors",title:"Edit Project",children:t.jsx(S.Z,{className:"w-4 h-4 text-jasper-slate"})})]})]}),(0,t.jsxs)("div",{className:"card-body",children:[s.description&&t.jsx("p",{className:"text-jasper-slate mb-6",children:s.description}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[t.jsx(V,{icon:F.Z,label:"Value",value:(0,y.xG)(s.value,s.currency)}),t.jsx(V,{icon:M.Z,label:"Package",value:(0,y.IS)(s.package)}),t.jsx(V,{icon:q.Z,label:"Target Date",value:s.target_completion?(0,y.p6)(s.target_completion):"-"}),t.jsx(V,{icon:A.Z,label:"Revisions",value:`${s.revision_rounds_used}/${s.revision_rounds_total}`})]}),(0,t.jsxs)("div",{className:"mt-6 pt-6 border-t border-border",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("span",{className:"text-sm font-medium text-jasper-carbon",children:"Overall Progress"}),(0,t.jsxs)("span",{className:"text-sm font-semibold text-jasper-emerald",children:[s.progress_percent,"%"]})]}),t.jsx("div",{className:"h-3 bg-surface-tertiary rounded-full overflow-hidden",children:t.jsx("div",{className:"h-full bg-gradient-to-r from-jasper-emerald to-jasper-emerald-light rounded-full transition-all duration-700",style:{width:`${s.progress_percent}%`}})})]})]})]}),(0,t.jsxs)("div",{className:"card",children:[t.jsx("div",{className:"card-header flex items-center justify-between",children:(0,t.jsxs)("h2",{className:"text-lg font-semibold text-jasper-carbon",children:["Milestones",(0,t.jsxs)("span",{className:"ml-2 text-sm font-normal text-jasper-slate",children:["(",eu,"/",eh," completed)"]})]})}),t.jsx("div",{className:"divide-y divide-border",children:0===o.length?t.jsx("div",{className:"p-6 text-center text-jasper-slate",children:"No milestones defined yet"}):o.map((e,a)=>(0,t.jsxs)("div",{className:(0,y.cn)("p-4 flex items-start gap-4 group transition-colors",e.completed&&"bg-surface-secondary/50"),children:[t.jsx("button",{onClick:()=>ec(e),disabled:k===e.id,className:"flex-shrink-0 mt-0.5 disabled:opacity-50",children:k===e.id?t.jsx(x.Z,{className:"w-5 h-5 text-jasper-emerald animate-spin"}):e.completed?t.jsx(C.Z,{className:"w-5 h-5 text-jasper-emerald hover:text-jasper-emerald-dark transition-colors"}):t.jsx(I,{className:"w-5 h-5 text-jasper-slate-light hover:text-jasper-emerald transition-colors"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:(0,y.cn)("font-medium",e.completed?"text-jasper-slate line-through":"text-jasper-carbon"),children:e.name}),(0,t.jsxs)("span",{className:"text-xs text-jasper-slate-light",children:["#",e.order]})]}),e.description&&t.jsx("p",{className:"text-sm text-jasper-slate mt-1",children:e.description}),(0,t.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-xs text-jasper-slate",children:[e.due_date&&(0,t.jsxs)("span",{className:(0,y.cn)("flex items-center gap-1",!e.completed&&new Date(e.due_date)<new Date&&"text-red-500"),children:[t.jsx(q.Z,{className:"w-3 h-3"}),"Due: ",(0,y.p6)(e.due_date),!e.completed&&new Date(e.due_date)<new Date&&" (Overdue)"]}),e.completed_date&&(0,t.jsxs)("span",{className:"flex items-center gap-1 text-jasper-emerald",children:[t.jsx(C.Z,{className:"w-3 h-3"}),"Completed: ",(0,y.p6)(e.completed_date)]})]})]})]},e.id))})]}),(s.project_sector||s.project_location||s.funding_amount||s.target_dfis?.length)&&(0,t.jsxs)("div",{className:"card",children:[t.jsx("div",{className:"card-header",children:t.jsx("h2",{className:"text-lg font-semibold text-jasper-carbon",children:"Project Details"})}),t.jsx("div",{className:"card-body",children:(0,t.jsxs)("dl",{className:"grid grid-cols-2 gap-4",children:[s.project_sector&&(0,t.jsxs)("div",{children:[t.jsx("dt",{className:"text-sm text-jasper-slate",children:"Sector"}),t.jsx("dd",{className:"font-medium text-jasper-carbon",children:s.project_sector})]}),s.project_location&&(0,t.jsxs)("div",{children:[t.jsx("dt",{className:"text-sm text-jasper-slate",children:"Location"}),t.jsx("dd",{className:"font-medium text-jasper-carbon",children:s.project_location})]}),s.funding_amount&&(0,t.jsxs)("div",{children:[t.jsx("dt",{className:"text-sm text-jasper-slate",children:"Funding Target"}),t.jsx("dd",{className:"font-medium text-jasper-carbon",children:(0,y.xG)(s.funding_amount,s.currency)})]}),s.target_dfis&&s.target_dfis.length>0&&(0,t.jsxs)("div",{className:"col-span-2",children:[t.jsx("dt",{className:"text-sm text-jasper-slate mb-2",children:"Target DFIs"}),t.jsx("dd",{className:"flex flex-wrap gap-2",children:s.target_dfis.map(e=>t.jsx("span",{className:"badge badge-info",children:e},e))})]})]})})]})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"card",children:[t.jsx("div",{className:"card-header",children:t.jsx("h3",{className:"font-semibold text-jasper-carbon",children:"Quick Actions"})}),(0,t.jsxs)("div",{className:"card-body space-y-2",children:[(0,t.jsxs)("button",{onClick:ei,disabled:N||"final"===s.stage,className:"btn-primary w-full justify-start disabled:opacity-50",children:[N?t.jsx(x.Z,{className:"w-4 h-4 animate-spin"}):t.jsx(T.Z,{className:"w-4 h-4"}),N?"Advancing...":"final"===s.stage?"Project Complete":"Advance Stage"]}),(0,t.jsxs)("button",{className:"btn-secondary w-full justify-start",children:[t.jsx(c.Z,{className:"w-4 h-4"}),"Create Invoice"]}),(0,t.jsxs)("button",{onClick:()=>Q("documents"),className:"btn-ghost w-full justify-start",children:[t.jsx(g,{className:"w-4 h-4"}),"Manage Documents"]}),(0,t.jsxs)("button",{onClick:ed,className:"btn-ghost w-full justify-start",children:[t.jsx(S.Z,{className:"w-4 h-4"}),"Edit Project"]})]})]}),(0,t.jsxs)("div",{className:"card",children:[t.jsx("div",{className:"card-header",children:t.jsx("h3",{className:"font-semibold text-jasper-carbon",children:"Timeline"})}),t.jsx("div",{className:"card-body",children:(0,t.jsxs)("div",{className:"space-y-4",children:[t.jsx(L,{label:"Inquiry Date",date:s.inquiry_date,completed:!0}),s.start_date&&t.jsx(L,{label:"Start Date",date:s.start_date,completed:!0}),s.target_completion&&t.jsx(L,{label:"Target Completion",date:s.target_completion,completed:!!s.actual_completion}),s.actual_completion&&t.jsx(L,{label:"Actual Completion",date:s.actual_completion,completed:!0,highlight:!0})]})})]}),t.jsx("div",{className:"card",children:(0,t.jsxs)("div",{className:"card-body text-sm text-jasper-slate space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Created"}),t.jsx("span",{className:"text-jasper-carbon",children:(0,y.p6)(s.created_at)})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Last Updated"}),t.jsx("span",{className:"text-jasper-carbon",children:(0,y.p6)(s.updated_at)})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Project ID"}),(0,t.jsxs)("span",{className:"font-mono text-jasper-carbon",children:["#",s.id]})]})]})})]})]}),"documents"===$&&t.jsx(w,{projectId:a,documents:p,onDocumentsChange:en,isAdmin:!0}),"messages"===$&&s&&t.jsx("div",{className:"h-[600px]",children:t.jsx(D.p,{companyId:s.company_id,companyName:s.company_name,projectId:a})})]}),K&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)("div",{className:"bg-surface-primary rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-border",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 rounded-lg bg-jasper-emerald/10 flex items-center justify-center",children:t.jsx(R.Z,{className:"w-5 h-5 text-jasper-emerald"})}),(0,t.jsxs)("div",{children:[t.jsx("h2",{className:"text-lg font-semibold text-jasper-carbon",children:"Edit Project"}),t.jsx("p",{className:"text-sm text-jasper-slate",children:s.reference})]})]}),t.jsx("button",{onClick:ep,className:"p-2 hover:bg-surface-secondary rounded-lg transition-colors",children:t.jsx(j.Z,{className:"w-5 h-5 text-jasper-slate"})})]}),(0,t.jsxs)("form",{onSubmit:em,className:"p-6",children:[ea&&(0,t.jsxs)("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg flex items-center gap-3",children:[t.jsx(E.Z,{className:"w-5 h-5 text-green-600"}),t.jsx("span",{className:"text-green-700",children:"Project updated successfully!"})]}),Y&&(0,t.jsxs)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-center gap-3",children:[t.jsx(h.Z,{className:"w-5 h-5 text-red-600"}),t.jsx("span",{className:"text-red-700",children:Y})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-jasper-carbon mb-4",children:"Basic Information"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"name",className:"input-label",children:"Project Name *"}),t.jsx("input",{type:"text",id:"name",name:"name",value:et.name,onChange:eo,className:"input",required:!0})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"description",className:"input-label",children:"Description"}),t.jsx("textarea",{id:"description",name:"description",value:et.description,onChange:eo,rows:3,className:"input resize-none",placeholder:"Brief description of the project..."})]})]})]}),(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-jasper-carbon mb-4",children:"Package & Value"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"package",className:"input-label",children:"Package *"}),(0,t.jsxs)("select",{id:"package",name:"package",value:et.package,onChange:eo,className:"input",required:!0,children:[t.jsx("option",{value:"",children:"Select package..."}),U.map(e=>(0,t.jsxs)("option",{value:e.value,children:[e.label," (",e.price,")"]},e.value))]})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"currency",className:"input-label",children:"Currency"}),t.jsx("select",{id:"currency",name:"currency",value:et.currency,onChange:eo,className:"input",children:G.map(e=>t.jsx("option",{value:e.value,children:e.label},e.value))})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"value",className:"input-label",children:"Project Value"}),t.jsx("input",{type:"number",id:"value",name:"value",value:et.value,onChange:eo,className:"input",min:"0",step:"0.01",placeholder:"0.00"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"target_completion",className:"input-label",children:"Target Completion"}),t.jsx("input",{type:"date",id:"target_completion",name:"target_completion",value:et.target_completion,onChange:eo,className:"input"})]})]})]}),(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-jasper-carbon mb-4",children:"Project Details"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"project_sector",className:"input-label",children:"Sector"}),(0,t.jsxs)("select",{id:"project_sector",name:"project_sector",value:et.project_sector,onChange:eo,className:"input",children:[t.jsx("option",{value:"",children:"Select sector..."}),z.map(e=>t.jsx("option",{value:e,children:e},e))]})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"project_location",className:"input-label",children:"Location"}),t.jsx("input",{type:"text",id:"project_location",name:"project_location",value:et.project_location,onChange:eo,className:"input",placeholder:"City, Country"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"funding_amount",className:"input-label",children:"Funding Target"}),t.jsx("input",{type:"number",id:"funding_amount",name:"funding_amount",value:et.funding_amount,onChange:eo,className:"input",min:"0",step:"0.01",placeholder:"0.00"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"target_dfis",className:"input-label",children:"Target DFIs"}),t.jsx("input",{type:"text",id:"target_dfis",name:"target_dfis",value:et.target_dfis,onChange:eo,className:"input",placeholder:"AfDB, IFC, DBSA (comma-separated)"})]})]})]})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-3 mt-8 pt-6 border-t border-border",children:[t.jsx("button",{type:"button",onClick:ep,className:"btn-secondary",disabled:X,children:"Cancel"}),t.jsx("button",{type:"submit",className:"btn-primary",disabled:X||!et.name||!et.package,children:X?(0,t.jsxs)(t.Fragment,{children:[t.jsx(x.Z,{className:"w-4 h-4 animate-spin"}),"Updating..."]}):"Update Project"})]})]})]})})]})}function V({icon:e,label:a,value:s}){return(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"w-10 h-10 rounded-lg bg-surface-secondary flex items-center justify-center flex-shrink-0",children:t.jsx(e,{className:"w-5 h-5 text-jasper-emerald"})}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-xs text-jasper-slate",children:a}),t.jsx("p",{className:"font-medium text-jasper-carbon",children:s})]})]})}function L({label:e,date:a,completed:s,highlight:l}){return(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:(0,y.cn)("w-3 h-3 rounded-full",s?l?"bg-jasper-emerald":"bg-jasper-slate":"bg-surface-tertiary border-2 border-jasper-slate-light")}),(0,t.jsxs)("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm text-jasper-slate",children:e}),t.jsx("p",{className:(0,y.cn)("font-medium",l?"text-jasper-emerald":"text-jasper-carbon"),children:(0,y.p6)(a)})]})]})}},8231:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>t});let t=(0,s(8570).createProxy)(String.raw`/Users/mac/Downloads/jasper-financial-architecture/jasper-portal-frontend/src/app/projects/[id]/page.tsx#default`)}};var a=require("../../../webpack-runtime.js");a.C(e);var s=e=>a(a.s=e),t=a.X(0,[377,375,621,256,848,9,876],()=>s(1637));module.exports=t})();