(()=>{var e={};e.id=288,e.ids=[288],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5315:e=>{"use strict";e.exports=require("path")},7360:e=>{"use strict";e.exports=require("url")},1748:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>o,pages:()=>m,routeModule:()=>p,tree:()=>d}),a(929),a(5280),a(5866);var t=a(3191),r=a(8716),l=a(7922),n=a.n(l),i=a(5231),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);a.d(s,c);let d=["",{children:["clients",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,929)),"/Users/mac/Downloads/jasper-financial-architecture/jasper-portal-frontend/src/app/clients/[id]/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,1150))).default(e)],apple:[async e=>(await Promise.resolve().then(a.bind(a,3601))).default(e)],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,5280)),"/Users/mac/Downloads/jasper-financial-architecture/jasper-portal-frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,5866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,1150))).default(e)],apple:[async e=>(await Promise.resolve().then(a.bind(a,3601))).default(e)],openGraph:[],twitter:[],manifest:void 0}}],m=["/Users/mac/Downloads/jasper-financial-architecture/jasper-portal-frontend/src/app/clients/[id]/page.tsx"],o="/clients/[id]/page",x={require:a,loadChunk:()=>Promise.resolve()},p=new t.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/clients/[id]/page",pathname:"/clients/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},4700:(e,s,a)=>{Promise.resolve().then(a.bind(a,5662))},6333:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(2881).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},7358:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(2881).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},1291:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(2881).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},7027:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(2881).Z)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},5932:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(2881).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},7636:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(2881).Z)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},2887:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(2881).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},3855:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(2881).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},9508:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(2881).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},7069:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(2881).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},5662:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>O});var t=a(326),r=a(7577),l=a(5047),n=a(434),i=a(1012),c=a(9213),d=a(7506),m=a(1291),o=a(6333),x=a(2881);let p=(0,x.Z)("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);var h=a(7069),j=a(6283),u=a(1821),b=a(617),g=a(9508),v=a(9734),N=a(7636),f=a(5932),y=a(2887);let w=(0,x.Z)("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);var _=a(3855),k=a(361),C=a(9436),Z=a(9183),P=a(7358),S=a(4019),M=a(9635),q=a(7027),A=a(1223),I=a(2017),$=a(4976);let E={lead:"bg-blue-100 text-blue-700",prospect:"bg-purple-100 text-purple-700",qualified:"bg-amber-100 text-amber-700",proposal_sent:"bg-orange-100 text-orange-700",negotiation:"bg-yellow-100 text-yellow-700",client:"bg-green-100 text-green-700",inactive:"bg-gray-100 text-gray-700",lost:"bg-red-100 text-red-700"},F={draft:"bg-gray-100 text-gray-700",sent:"bg-blue-100 text-blue-700",viewed:"bg-purple-100 text-purple-700",paid:"bg-green-100 text-green-700",overdue:"bg-red-100 text-red-700",cancelled:"bg-gray-100 text-gray-500"},D={financial_services:"Financial Services",technology:"Technology",manufacturing:"Manufacturing",agriculture:"Agriculture",mining:"Mining",healthcare:"Healthcare",retail:"Retail",real_estate:"Real Estate",energy:"Energy",infrastructure:"Infrastructure",education:"Education",tourism:"Tourism",other:"Other"},L=Object.entries(D).map(([e,s])=>({value:e,label:s})),T=[{value:"lead",label:"Lead"},{value:"prospect",label:"Prospect"},{value:"qualified",label:"Qualified"},{value:"proposal_sent",label:"Proposal Sent"},{value:"negotiation",label:"Negotiation"},{value:"client",label:"Client"},{value:"inactive",label:"Inactive"},{value:"lost",label:"Lost"}],G=[{value:"website",label:"Website"},{value:"referral",label:"Referral"},{value:"linkedin",label:"LinkedIn"},{value:"conference",label:"Conference/Event"},{value:"cold_outreach",label:"Cold Outreach"},{value:"partner",label:"Partner"},{value:"other",label:"Other"}];function O(){let e=Number((0,l.useParams)().id),[s,a]=(0,r.useState)(null),[x,q]=(0,r.useState)([]),[O,z]=(0,r.useState)([]),[R,B]=(0,r.useState)([]),[V,H]=(0,r.useState)(!0),[Q,J]=(0,r.useState)("overview"),[W,K]=(0,r.useState)(null),[X,Y]=(0,r.useState)(null),[ee,es]=(0,r.useState)(!1),[ea,et]=(0,r.useState)(!1),[er,el]=(0,r.useState)(null),[en,ei]=(0,r.useState)(!1),[ec,ed]=(0,r.useState)({name:"",trading_name:"",industry:"",country:"",city:"",website:"",phone:"",email:"",status:"",lead_source:"",referred_by:"",notes:""}),[em,eo]=(0,r.useState)(!1),[ex,ep]=(0,r.useState)(!1),[eh,ej]=(0,r.useState)(null),[eu,eb]=(0,r.useState)(!1),[eg,ev]=(0,r.useState)({first_name:"",last_name:"",email:"",phone:"",job_title:"",is_primary:!1,is_decision_maker:!1}),eN=(0,$.NL)(),ef=async s=>{K(s),Y(null);try{await I.cv.sendInvite(e,s),Y({contactId:s,status:"sent"})}catch(e){Y({contactId:s,status:"error",message:e.message})}finally{K(null)}},ey=()=>{s&&(ed({name:s.name||"",trading_name:s.trading_name||"",industry:s.industry||"",country:s.country||"",city:s.city||"",website:s.website||"",phone:s.phone||"",email:s.email||"",status:s.status||"",lead_source:s.lead_source||"",referred_by:s.referred_by||"",notes:s.notes||""}),es(!0))},ew=e=>{let{name:s,value:a}=e.target;ed(e=>({...e,[s]:a}))},e_=async s=>{s.preventDefault(),et(!0),el(null),ei(!1);try{if(!ec.name.trim())throw Error("Company name is required");let s={name:ec.name.trim(),trading_name:ec.trading_name.trim()||void 0,industry:ec.industry||void 0,country:ec.country.trim()||void 0,city:ec.city.trim()||void 0,website:ec.website.trim()||void 0,phone:ec.phone.trim()||void 0,email:ec.email.trim()||void 0,status:ec.status||void 0,lead_source:ec.lead_source||void 0,referred_by:ec.referred_by.trim()||void 0,notes:ec.notes.trim()||void 0},t=await I.cv.update(e,s);a(t),ei(!0),eN.invalidateQueries({queryKey:["companies"]}),setTimeout(()=>{es(!1),ei(!1)},1500)}catch(e){el(e.message||"Failed to update client")}finally{et(!1)}},ek=()=>{es(!1),el(null),ei(!1)},eC=e=>{let{name:s,value:a,type:t,checked:r}=e.target;ev(e=>({...e,[s]:"checkbox"===t?r:a}))},eZ=async s=>{s.preventDefault(),ep(!0),ej(null),eb(!1);try{if(!eg.first_name.trim()||!eg.email.trim())throw Error("First name and email are required");let s={first_name:eg.first_name.trim(),last_name:eg.last_name.trim()||void 0,email:eg.email.trim(),phone:eg.phone.trim()||void 0,job_title:eg.job_title.trim()||void 0,is_primary:eg.is_primary,is_decision_maker:eg.is_decision_maker},a=await fetch(`http://127.0.0.1:8000/clients/${e}/contacts`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(s)});if(!a.ok)throw Error("Failed to add contact");let t=await a.json();q(e=>[...e,t]),eb(!0),setTimeout(()=>{eo(!1),ev({first_name:"",last_name:"",email:"",phone:"",job_title:"",is_primary:!1,is_decision_maker:!1}),eb(!1)},1500)}catch(e){ej(e.message||"Failed to add contact")}finally{ep(!1)}},eP=()=>{eo(!1),ej(null),eb(!1),ev({first_name:"",last_name:"",email:"",phone:"",job_title:"",is_primary:!1,is_decision_maker:!1})};if(V)return t.jsx("div",{className:"min-h-screen bg-surface-secondary flex items-center justify-center",children:(0,t.jsxs)("div",{className:"flex items-center gap-3 text-jasper-slate",children:[t.jsx(d.Z,{className:"w-5 h-5 animate-spin"}),"Loading client..."]})});if(!s)return t.jsx("div",{className:"min-h-screen bg-surface-secondary flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[t.jsx(m.Z,{className:"w-12 h-12 text-jasper-slate mx-auto mb-4"}),t.jsx("p",{className:"text-jasper-slate mb-4",children:"Client not found"}),t.jsx(n.default,{href:"/clients",className:"btn-primary",children:"Back to Clients"})]})});x.find(e=>e.is_primary)||x[0];let eS=O.filter(e=>!["final","cancelled"].includes(e.stage)),eM=O.filter(e=>"final"===e.stage),eq=R.filter(e=>["sent","viewed","overdue"].includes(e.status)),eA=R.filter(e=>"paid"===e.status);return(0,t.jsxs)("div",{className:"min-h-screen bg-surface-secondary",children:[t.jsx(i.h4,{title:s.name,subtitle:s.trading_name||D[s.industry||""]||"Client"}),(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsxs)(n.default,{href:"/clients",className:"inline-flex items-center gap-2 text-sm text-jasper-slate hover:text-jasper-carbon transition-colors",children:[t.jsx(o.Z,{className:"w-4 h-4"}),"Back to Clients"]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsx("div",{className:"card p-5",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-12 h-12 rounded-xl bg-jasper-emerald/10 flex items-center justify-center",children:t.jsx(p,{className:"w-6 h-6 text-jasper-emerald"})}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm text-jasper-slate",children:"Active Projects"}),t.jsx("p",{className:"text-2xl font-semibold text-jasper-carbon",children:eS.length})]})]})}),t.jsx("div",{className:"card p-5",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-12 h-12 rounded-xl bg-blue-100 flex items-center justify-center",children:t.jsx(h.Z,{className:"w-6 h-6 text-blue-600"})}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm text-jasper-slate",children:"Total Revenue"}),t.jsx("p",{className:"text-2xl font-semibold text-jasper-carbon",children:(0,A.xG)(s.total_revenue,"USD")})]})]})}),t.jsx("div",{className:"card p-5",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-12 h-12 rounded-xl bg-amber-100 flex items-center justify-center",children:t.jsx(j.Z,{className:"w-6 h-6 text-amber-600"})}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm text-jasper-slate",children:"Pending Invoices"}),t.jsx("p",{className:"text-2xl font-semibold text-jasper-carbon",children:eq.length})]})]})}),t.jsx("div",{className:"card p-5",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:(0,A.cn)("w-12 h-12 rounded-xl flex items-center justify-center",s.outstanding_balance>0?"bg-red-100":"bg-green-100"),children:t.jsx(u.Z,{className:(0,A.cn)("w-6 h-6",s.outstanding_balance>0?"text-red-600":"text-green-600")})}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm text-jasper-slate",children:"Outstanding"}),t.jsx("p",{className:(0,A.cn)("text-2xl font-semibold",s.outstanding_balance>0?"text-red-600":"text-jasper-carbon"),children:(0,A.xG)(s.outstanding_balance,"USD")})]})]})})]}),(0,t.jsxs)("div",{className:"flex gap-1 border-b border-border",children:[t.jsx("button",{onClick:()=>J("overview"),className:(0,A.cn)("px-4 py-2 text-sm font-medium border-b-2 transition-colors","overview"===Q?"border-jasper-emerald text-jasper-emerald":"border-transparent text-jasper-slate hover:text-jasper-carbon"),children:"Overview"}),(0,t.jsxs)("button",{onClick:()=>J("projects"),className:(0,A.cn)("px-4 py-2 text-sm font-medium border-b-2 transition-colors flex items-center gap-2","projects"===Q?"border-jasper-emerald text-jasper-emerald":"border-transparent text-jasper-slate hover:text-jasper-carbon"),children:[t.jsx(p,{className:"w-4 h-4"}),"Projects",O.length>0&&t.jsx("span",{className:"badge badge-secondary text-xs",children:O.length})]}),(0,t.jsxs)("button",{onClick:()=>J("invoices"),className:(0,A.cn)("px-4 py-2 text-sm font-medium border-b-2 transition-colors flex items-center gap-2","invoices"===Q?"border-jasper-emerald text-jasper-emerald":"border-transparent text-jasper-slate hover:text-jasper-carbon"),children:[t.jsx(j.Z,{className:"w-4 h-4"}),"Invoices",R.length>0&&t.jsx("span",{className:"badge badge-secondary text-xs",children:R.length})]}),(0,t.jsxs)("button",{onClick:()=>J("messages"),className:(0,A.cn)("px-4 py-2 text-sm font-medium border-b-2 transition-colors flex items-center gap-2","messages"===Q?"border-jasper-emerald text-jasper-emerald":"border-transparent text-jasper-slate hover:text-jasper-carbon"),children:[t.jsx(b.Z,{className:"w-4 h-4"}),"Messages"]})]}),"overview"===Q&&(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,t.jsxs)("div",{className:"card",children:[(0,t.jsxs)("div",{className:"card-header flex items-center justify-between",children:[t.jsx("h2",{className:"text-lg font-semibold text-jasper-carbon",children:"Company Information"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:(0,A.cn)("badge text-sm",E[s.status]||"badge-neutral"),children:s.status}),t.jsx("button",{onClick:ey,className:"p-2 hover:bg-surface-secondary rounded-lg transition-colors",children:t.jsx(g.Z,{className:"w-4 h-4 text-jasper-slate"})})]})]}),(0,t.jsxs)("div",{className:"card-body",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.industry&&t.jsx(U,{icon:v.Z,label:"Industry",value:D[s.industry]||s.industry}),(s.city||s.country)&&t.jsx(U,{icon:N.Z,label:"Location",value:[s.city,s.country].filter(Boolean).join(", ")}),s.email&&t.jsx(U,{icon:f.Z,label:"Email",value:s.email,href:`mailto:${s.email}`}),s.phone&&t.jsx(U,{icon:y.Z,label:"Phone",value:s.phone,href:`tel:${s.phone}`}),s.website&&t.jsx(U,{icon:w,label:"Website",value:s.website.replace(/^https?:\/\//,""),href:s.website,external:!0}),s.lead_source&&t.jsx(U,{icon:h.Z,label:"Lead Source",value:s.lead_source.replace(/_/g," ")})]}),s.notes&&(0,t.jsxs)("div",{className:"mt-6 pt-6 border-t border-border",children:[t.jsx("p",{className:"text-sm text-jasper-slate mb-2",children:"Notes"}),t.jsx("p",{className:"text-jasper-carbon",children:s.notes})]}),s.dfi_targets&&s.dfi_targets.length>0&&(0,t.jsxs)("div",{className:"mt-6 pt-6 border-t border-border",children:[t.jsx("p",{className:"text-sm text-jasper-slate mb-3",children:"Target DFIs"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:s.dfi_targets.map(e=>t.jsx("span",{className:"badge badge-info",children:e},e))})]})]})]}),(0,t.jsxs)("div",{className:"card",children:[(0,t.jsxs)("div",{className:"card-header flex items-center justify-between",children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold text-jasper-carbon",children:["Contacts",(0,t.jsxs)("span",{className:"ml-2 text-sm font-normal text-jasper-slate",children:["(",x.length,")"]})]}),(0,t.jsxs)("button",{onClick:()=>eo(!0),className:"btn-secondary text-sm",children:[t.jsx(_.Z,{className:"w-4 h-4"}),"Add Contact"]})]}),t.jsx("div",{className:"divide-y divide-border",children:0===x.length?t.jsx("div",{className:"p-6 text-center text-jasper-slate",children:"No contacts added yet"}):x.map(e=>(0,t.jsxs)("div",{className:"p-4 flex items-start justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-jasper-navy/10 flex items-center justify-center flex-shrink-0",children:t.jsx("span",{className:"text-sm font-medium text-jasper-navy",children:(0,A.Qm)(`${e.first_name} ${e.last_name}`)})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("span",{className:"font-medium text-jasper-carbon",children:[e.first_name," ",e.last_name]}),e.is_primary&&t.jsx("span",{className:"badge badge-success text-xs",children:"Primary"}),e.is_decision_maker&&t.jsx("span",{className:"badge badge-info text-xs",children:"Decision Maker"})]}),e.job_title&&t.jsx("p",{className:"text-sm text-jasper-slate",children:e.job_title}),(0,t.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-sm text-jasper-slate",children:[(0,t.jsxs)("a",{href:`mailto:${e.email}`,className:"flex items-center gap-1 hover:text-jasper-emerald transition-colors",children:[t.jsx(f.Z,{className:"w-3 h-3"}),e.email]}),e.phone&&(0,t.jsxs)("a",{href:`tel:${e.phone}`,className:"flex items-center gap-1 hover:text-jasper-emerald transition-colors",children:[t.jsx(y.Z,{className:"w-3 h-3"}),e.phone]})]}),X?.contactId===e.id&&t.jsx("div",{className:(0,A.cn)("mt-2 text-sm flex items-center gap-1","sent"===X.status?"text-green-600":"text-red-600"),children:"sent"===X.status?(0,t.jsxs)(t.Fragment,{children:[t.jsx(k.Z,{className:"w-3 h-3"}),"Portal invitation sent"]}):(0,t.jsxs)(t.Fragment,{children:[t.jsx(m.Z,{className:"w-3 h-3"}),X.message||"Failed to send invite"]})})]})]}),(0,t.jsxs)("button",{onClick:()=>ef(e.id),disabled:W===e.id,className:"btn-ghost text-sm whitespace-nowrap",children:[W===e.id?t.jsx(d.Z,{className:"w-4 h-4 animate-spin"}):t.jsx(C.Z,{className:"w-4 h-4"}),W===e.id?"Sending...":"Send Invite"]})]},e.id))})]})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"card",children:[t.jsx("div",{className:"card-header",children:t.jsx("h3",{className:"font-semibold text-jasper-carbon",children:"Quick Actions"})}),(0,t.jsxs)("div",{className:"card-body space-y-2",children:[(0,t.jsxs)(n.default,{href:`/projects/new?company_id=${s.id}`,className:"btn-primary w-full justify-start",children:[t.jsx(p,{className:"w-4 h-4"}),"Create Project"]}),(0,t.jsxs)(n.default,{href:`/invoices/new?company_id=${s.id}`,className:"btn-secondary w-full justify-start",children:[t.jsx(j.Z,{className:"w-4 h-4"}),"Create Invoice"]}),(0,t.jsxs)("button",{onClick:()=>J("messages"),className:"btn-ghost w-full justify-start",children:[t.jsx(b.Z,{className:"w-4 h-4"}),"Send Message"]}),(0,t.jsxs)("button",{onClick:ey,className:"btn-ghost w-full justify-start",children:[t.jsx(g.Z,{className:"w-4 h-4"}),"Edit Client"]})]})]}),O.length>0&&(0,t.jsxs)("div",{className:"card",children:[(0,t.jsxs)("div",{className:"card-header flex items-center justify-between",children:[t.jsx("h3",{className:"font-semibold text-jasper-carbon",children:"Recent Projects"}),t.jsx("button",{onClick:()=>J("projects"),className:"text-sm text-jasper-emerald hover:underline",children:"View all"})]}),t.jsx("div",{className:"divide-y divide-border",children:O.slice(0,3).map(e=>(0,t.jsxs)(n.default,{href:`/projects/${e.id}`,className:"flex items-center justify-between p-4 hover:bg-surface-secondary transition-colors",children:[(0,t.jsxs)("div",{children:[t.jsx("p",{className:"font-medium text-jasper-carbon text-sm",children:e.reference}),t.jsx("p",{className:"text-xs text-jasper-slate",children:e.name})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:(0,A.cn)("badge text-xs",(0,A.ul)(e.stage)),children:(0,A.im)(e.stage)}),t.jsx(Z.Z,{className:"w-4 h-4 text-jasper-slate"})]})]},e.id))})]}),t.jsx("div",{className:"card",children:(0,t.jsxs)("div",{className:"card-body text-sm text-jasper-slate space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Created"}),t.jsx("span",{className:"text-jasper-carbon",children:(0,A.p6)(s.created_at)})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Last Updated"}),t.jsx("span",{className:"text-jasper-carbon",children:(0,A.p6)(s.updated_at)})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Client ID"}),(0,t.jsxs)("span",{className:"font-mono text-jasper-carbon",children:["#",s.id]})]})]})})]})]}),"projects"===Q&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[t.jsx("h2",{className:"text-lg font-semibold text-jasper-carbon",children:"Projects"}),(0,t.jsxs)("p",{className:"text-sm text-jasper-slate",children:[eS.length," active, ",eM.length," completed"]})]}),(0,t.jsxs)(n.default,{href:`/projects/new?company_id=${s.id}`,className:"btn-primary",children:[t.jsx(p,{className:"w-4 h-4"}),"New Project"]})]}),0===O.length?(0,t.jsxs)("div",{className:"card p-12 text-center",children:[t.jsx(p,{className:"w-12 h-12 text-jasper-slate mx-auto mb-4"}),t.jsx("p",{className:"text-jasper-slate mb-4",children:"No projects yet"}),t.jsx(n.default,{href:`/projects/new?company_id=${s.id}`,className:"btn-primary inline-flex",children:"Create First Project"})]}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:O.map(e=>(0,t.jsxs)(n.default,{href:`/projects/${e.id}`,className:"card card-hover p-5",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,t.jsxs)("div",{children:[t.jsx("p",{className:"font-semibold text-jasper-carbon",children:e.reference}),t.jsx("p",{className:"text-sm text-jasper-slate",children:e.name})]}),t.jsx("span",{className:(0,A.cn)("badge text-xs",(0,A.ul)(e.stage)),children:(0,A.im)(e.stage)})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm mb-4",children:[t.jsx("span",{className:"text-jasper-slate",children:"Value"}),t.jsx("span",{className:"font-medium text-jasper-carbon",children:(0,A.xG)(e.value,e.currency)})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[t.jsx("span",{className:"text-jasper-slate",children:"Progress"}),(0,t.jsxs)("span",{className:"font-medium text-jasper-emerald",children:[e.progress_percent,"%"]})]}),t.jsx("div",{className:"h-2 bg-surface-tertiary rounded-full overflow-hidden",children:t.jsx("div",{className:"h-full bg-jasper-emerald rounded-full transition-all",style:{width:`${e.progress_percent}%`}})})]}),e.target_completion&&(0,t.jsxs)("div",{className:"mt-4 pt-4 border-t border-border flex items-center justify-between text-sm",children:[(0,t.jsxs)("span",{className:"text-jasper-slate flex items-center gap-1",children:[t.jsx(P.Z,{className:"w-3 h-3"}),"Target"]}),t.jsx("span",{className:"text-jasper-carbon",children:(0,A.p6)(e.target_completion)})]})]},e.id))})]}),"invoices"===Q&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[t.jsx("h2",{className:"text-lg font-semibold text-jasper-carbon",children:"Invoices"}),(0,t.jsxs)("p",{className:"text-sm text-jasper-slate",children:[eq.length," pending, ",eA.length," paid"]})]}),(0,t.jsxs)(n.default,{href:`/invoices/new?company_id=${s.id}`,className:"btn-primary",children:[t.jsx(j.Z,{className:"w-4 h-4"}),"New Invoice"]})]}),0===R.length?(0,t.jsxs)("div",{className:"card p-12 text-center",children:[t.jsx(j.Z,{className:"w-12 h-12 text-jasper-slate mx-auto mb-4"}),t.jsx("p",{className:"text-jasper-slate mb-4",children:"No invoices yet"}),t.jsx(n.default,{href:`/invoices/new?company_id=${s.id}`,className:"btn-primary inline-flex",children:"Create First Invoice"})]}):t.jsx("div",{className:"card overflow-hidden",children:(0,t.jsxs)("table",{className:"w-full",children:[t.jsx("thead",{className:"bg-surface-secondary border-b border-border",children:(0,t.jsxs)("tr",{children:[t.jsx("th",{className:"text-left px-4 py-3 text-sm font-medium text-jasper-slate",children:"Invoice"}),t.jsx("th",{className:"text-left px-4 py-3 text-sm font-medium text-jasper-slate",children:"Status"}),t.jsx("th",{className:"text-left px-4 py-3 text-sm font-medium text-jasper-slate",children:"Amount"}),t.jsx("th",{className:"text-left px-4 py-3 text-sm font-medium text-jasper-slate",children:"Due Date"}),t.jsx("th",{className:"text-right px-4 py-3 text-sm font-medium text-jasper-slate"})]})}),t.jsx("tbody",{className:"divide-y divide-border",children:R.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-surface-secondary/50 transition-colors",children:[(0,t.jsxs)("td",{className:"px-4 py-4",children:[t.jsx(n.default,{href:`/invoices/${e.id}`,className:"font-medium text-jasper-carbon hover:text-jasper-emerald",children:e.invoice_number}),t.jsx("p",{className:"text-xs text-jasper-slate",children:(0,A.p6)(e.created_at)})]}),t.jsx("td",{className:"px-4 py-4",children:t.jsx("span",{className:(0,A.cn)("badge text-xs",F[e.status]||"badge-neutral"),children:e.status})}),t.jsx("td",{className:"px-4 py-4 font-medium text-jasper-carbon",children:(0,A.xG)(e.total_amount,e.currency)}),t.jsx("td",{className:"px-4 py-4 text-sm text-jasper-slate",children:(0,A.p6)(e.due_date)}),t.jsx("td",{className:"px-4 py-4 text-right",children:(0,t.jsxs)(n.default,{href:`/invoices/${e.id}`,className:"btn-ghost text-sm",children:["View",t.jsx(Z.Z,{className:"w-4 h-4"})]})})]},e.id))})]})})]}),"messages"===Q&&t.jsx("div",{className:"h-[600px]",children:t.jsx(c.p,{companyId:s.id,companyName:s.name})})]}),ee&&t.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,t.jsxs)("div",{className:"flex min-h-full items-center justify-center p-4",children:[t.jsx("div",{className:"fixed inset-0 bg-black/50 transition-opacity",onClick:ek}),(0,t.jsxs)("div",{className:"relative bg-surface-primary rounded-xl shadow-modal w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-border",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 rounded-lg bg-jasper-emerald/10 flex items-center justify-center",children:t.jsx(v.Z,{className:"w-5 h-5 text-jasper-emerald"})}),(0,t.jsxs)("div",{children:[t.jsx("h2",{className:"text-lg font-semibold text-jasper-carbon",children:"Edit Client"}),t.jsx("p",{className:"text-sm text-jasper-slate",children:"Update client information"})]})]}),t.jsx("button",{onClick:ek,className:"p-2 hover:bg-surface-secondary rounded-lg transition-colors",children:t.jsx(S.Z,{className:"w-5 h-5 text-jasper-slate"})})]}),(0,t.jsxs)("form",{onSubmit:e_,className:"overflow-y-auto max-h-[calc(90vh-140px)]",children:[(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[en&&(0,t.jsxs)("div",{className:"flex items-center gap-3 p-4 bg-green-50 border border-green-200 rounded-lg",children:[t.jsx(k.Z,{className:"w-5 h-5 text-green-600"}),t.jsx("span",{className:"text-sm text-green-800",children:"Client updated successfully!"})]}),er&&(0,t.jsxs)("div",{className:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 rounded-lg",children:[t.jsx(m.Z,{className:"w-5 h-5 text-red-600"}),t.jsx("span",{className:"text-sm text-red-800",children:er})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"input-label",children:["Company Name ",t.jsx("span",{className:"text-status-error",children:"*"})]}),t.jsx("input",{type:"text",name:"name",value:ec.name,onChange:ew,className:"input",required:!0})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"input-label",children:"Trading Name"}),t.jsx("input",{type:"text",name:"trading_name",value:ec.trading_name,onChange:ew,className:"input"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"input-label",children:"Industry"}),(0,t.jsxs)("select",{name:"industry",value:ec.industry,onChange:ew,className:"input",children:[t.jsx("option",{value:"",children:"Select industry..."}),L.map(e=>t.jsx("option",{value:e.value,children:e.label},e.value))]})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"input-label",children:"Status"}),t.jsx("select",{name:"status",value:ec.status,onChange:ew,className:"input",children:T.map(e=>t.jsx("option",{value:e.value,children:e.label},e.value))})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"input-label",children:"Country"}),t.jsx("input",{type:"text",name:"country",value:ec.country,onChange:ew,placeholder:"e.g., South Africa",className:"input"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"input-label",children:"City"}),t.jsx("input",{type:"text",name:"city",value:ec.city,onChange:ew,placeholder:"e.g., Johannesburg",className:"input"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"input-label",children:"Email"}),t.jsx("input",{type:"email",name:"email",value:ec.email,onChange:ew,className:"input"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"input-label",children:"Phone"}),t.jsx("input",{type:"tel",name:"phone",value:ec.phone,onChange:ew,className:"input"})]})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"input-label",children:"Website"}),t.jsx("input",{type:"url",name:"website",value:ec.website,onChange:ew,placeholder:"https://...",className:"input"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"input-label",children:"Lead Source"}),(0,t.jsxs)("select",{name:"lead_source",value:ec.lead_source,onChange:ew,className:"input",children:[t.jsx("option",{value:"",children:"Select source..."}),G.map(e=>t.jsx("option",{value:e.value,children:e.label},e.value))]})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"input-label",children:"Referred By"}),t.jsx("input",{type:"text",name:"referred_by",value:ec.referred_by,onChange:ew,className:"input"})]})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"input-label",children:"Notes"}),t.jsx("textarea",{name:"notes",value:ec.notes,onChange:ew,rows:3,className:"input resize-none"})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-end gap-3 px-6 py-4 border-t border-border bg-surface-secondary",children:[t.jsx("button",{type:"button",onClick:ek,className:"btn-secondary",disabled:ea,children:"Cancel"}),t.jsx("button",{type:"submit",className:"btn-primary",disabled:ea||en,children:ea?(0,t.jsxs)(t.Fragment,{children:[t.jsx(d.Z,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):en?(0,t.jsxs)(t.Fragment,{children:[t.jsx(k.Z,{className:"w-4 h-4"}),"Saved!"]}):"Save Changes"})]})]})]})]})}),em&&t.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,t.jsxs)("div",{className:"flex min-h-full items-center justify-center p-4",children:[t.jsx("div",{className:"fixed inset-0 bg-black/50 transition-opacity",onClick:eP}),(0,t.jsxs)("div",{className:"relative bg-surface-primary rounded-xl shadow-modal w-full max-w-lg max-h-[90vh] overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-border",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 rounded-lg bg-jasper-emerald/10 flex items-center justify-center",children:t.jsx(M.Z,{className:"w-5 h-5 text-jasper-emerald"})}),(0,t.jsxs)("div",{children:[t.jsx("h2",{className:"text-lg font-semibold text-jasper-carbon",children:"Add Contact"}),(0,t.jsxs)("p",{className:"text-sm text-jasper-slate",children:["Add a new contact to ",s.name]})]})]}),t.jsx("button",{onClick:eP,className:"p-2 hover:bg-surface-secondary rounded-lg transition-colors",children:t.jsx(S.Z,{className:"w-5 h-5 text-jasper-slate"})})]}),(0,t.jsxs)("form",{onSubmit:eZ,className:"overflow-y-auto max-h-[calc(90vh-140px)]",children:[(0,t.jsxs)("div",{className:"p-6 space-y-4",children:[eu&&(0,t.jsxs)("div",{className:"flex items-center gap-3 p-4 bg-green-50 border border-green-200 rounded-lg",children:[t.jsx(k.Z,{className:"w-5 h-5 text-green-600"}),t.jsx("span",{className:"text-sm text-green-800",children:"Contact added successfully!"})]}),eh&&(0,t.jsxs)("div",{className:"flex items-center gap-3 p-4 bg-red-50 border border-red-200 rounded-lg",children:[t.jsx(m.Z,{className:"w-5 h-5 text-red-600"}),t.jsx("span",{className:"text-sm text-red-800",children:eh})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"input-label",children:["First Name ",t.jsx("span",{className:"text-status-error",children:"*"})]}),t.jsx("input",{type:"text",name:"first_name",value:eg.first_name,onChange:eC,className:"input",required:!0})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"input-label",children:"Last Name"}),t.jsx("input",{type:"text",name:"last_name",value:eg.last_name,onChange:eC,className:"input"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"input-label",children:["Email ",t.jsx("span",{className:"text-status-error",children:"*"})]}),t.jsx("input",{type:"email",name:"email",value:eg.email,onChange:eC,className:"input",required:!0})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"input-label",children:"Phone"}),t.jsx("input",{type:"tel",name:"phone",value:eg.phone,onChange:eC,className:"input"})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"input-label",children:"Job Title"}),t.jsx("input",{type:"text",name:"job_title",value:eg.job_title,onChange:eC,className:"input"})]})]}),(0,t.jsxs)("div",{className:"flex gap-6",children:[(0,t.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[t.jsx("input",{type:"checkbox",name:"is_primary",checked:eg.is_primary,onChange:eC,className:"w-4 h-4 rounded border-border text-jasper-emerald focus:ring-jasper-emerald"}),t.jsx("span",{className:"text-sm text-jasper-carbon",children:"Primary Contact"})]}),(0,t.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[t.jsx("input",{type:"checkbox",name:"is_decision_maker",checked:eg.is_decision_maker,onChange:eC,className:"w-4 h-4 rounded border-border text-jasper-emerald focus:ring-jasper-emerald"}),t.jsx("span",{className:"text-sm text-jasper-carbon",children:"Decision Maker"})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-end gap-3 px-6 py-4 border-t border-border bg-surface-secondary",children:[t.jsx("button",{type:"button",onClick:eP,className:"btn-secondary",disabled:ex,children:"Cancel"}),t.jsx("button",{type:"submit",className:"btn-primary",disabled:ex||eu,children:ex?(0,t.jsxs)(t.Fragment,{children:[t.jsx(d.Z,{className:"w-4 h-4 animate-spin"}),"Adding..."]}):eu?(0,t.jsxs)(t.Fragment,{children:[t.jsx(k.Z,{className:"w-4 h-4"}),"Added!"]}):(0,t.jsxs)(t.Fragment,{children:[t.jsx(_.Z,{className:"w-4 h-4"}),"Add Contact"]})})]})]})]})]})})]})}function U({icon:e,label:s,value:a,href:r,external:l}){let n=(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"w-10 h-10 rounded-lg bg-surface-secondary flex items-center justify-center flex-shrink-0",children:t.jsx(e,{className:"w-5 h-5 text-jasper-emerald"})}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-xs text-jasper-slate",children:s}),(0,t.jsxs)("p",{className:(0,A.cn)("font-medium",r?"text-jasper-emerald hover:underline":"text-jasper-carbon"),children:[a,l&&t.jsx(q.Z,{className:"w-3 h-3 inline ml-1"})]})]})]});return r?t.jsx("a",{href:r,target:l?"_blank":void 0,rel:l?"noopener noreferrer":void 0,children:n}):n}},929:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>t});let t=(0,a(8570).createProxy)(String.raw`/Users/mac/Downloads/jasper-financial-architecture/jasper-portal-frontend/src/app/clients/[id]/page.tsx#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),t=s.X(0,[377,375,621,256,848,9,876],()=>a(1748));module.exports=t})();