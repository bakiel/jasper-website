exports.id=848,exports.ids=[848],exports.modules={558:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,2994,23)),Promise.resolve().then(a.t.bind(a,6114,23)),Promise.resolve().then(a.t.bind(a,9727,23)),Promise.resolve().then(a.t.bind(a,9671,23)),Promise.resolve().then(a.t.bind(a,1868,23)),Promise.resolve().then(a.t.bind(a,4759,23))},212:(e,t,a)=>{Promise.resolve().then(a.bind(a,2684))},2684:(e,t,a)=>{"use strict";a.d(t,{AuthenticatedLayout:()=>f});var s=a(326),r=a(7577),n=a(5047),i=a(1493),l=a(8853),o=a(3371),d=a(7676),c=a(2017);let u=[{id:1,title:"Company Information",description:"Tell us about your company"},{id:2,title:"Project Details",description:"Describe your project"},{id:3,title:"Funding Requirements",description:"Your funding needs"},{id:4,title:"Documents Available",description:"Documentation status"},{id:5,title:"Impact & ESG",description:"Social and environmental impact"},{id:6,title:"Additional Information",description:"Any other details"}],m=[{value:"sdg1",label:"SDG 1: No Poverty"},{value:"sdg2",label:"SDG 2: Zero Hunger"},{value:"sdg3",label:"SDG 3: Good Health"},{value:"sdg4",label:"SDG 4: Quality Education"},{value:"sdg5",label:"SDG 5: Gender Equality"},{value:"sdg6",label:"SDG 6: Clean Water"},{value:"sdg7",label:"SDG 7: Affordable Energy"},{value:"sdg8",label:"SDG 8: Decent Work"},{value:"sdg9",label:"SDG 9: Industry & Innovation"},{value:"sdg10",label:"SDG 10: Reduced Inequalities"},{value:"sdg11",label:"SDG 11: Sustainable Cities"},{value:"sdg12",label:"SDG 12: Responsible Consumption"},{value:"sdg13",label:"SDG 13: Climate Action"},{value:"sdg14",label:"SDG 14: Life Below Water"},{value:"sdg15",label:"SDG 15: Life on Land"},{value:"sdg16",label:"SDG 16: Peace & Justice"},{value:"sdg17",label:"SDG 17: Partnerships"}],p=["IFC (World Bank)","African Development Bank (AfDB)","Development Bank of Southern Africa (DBSA)","Industrial Development Corporation (IDC)","European Investment Bank (EIB)","German Development Bank (KfW)","French Development Agency (AFD)","UK CDC","US DFC","Other"];function g({isOpen:e,onComplete:t}){let[a,n]=(0,r.useState)(1),[i,l]=(0,r.useState)(!1),[o,d]=(0,r.useState)(null),[g,h]=(0,r.useState)({company_description:"",years_in_operation:void 0,employee_count:"",annual_revenue_range:"",project_name:"",project_description:"",project_location:"",project_value_estimate:void 0,project_timeline:void 0,project_readiness:void 0,funding_status:void 0,funding_amount_required:void 0,dfi_experience:!1,previous_dfi_partners:[],preferred_dfis:[],has_business_plan:!1,has_financial_statements:!1,has_feasibility_study:!1,has_environmental_assessment:!1,has_legal_documentation:!1,additional_documents:"",jobs_to_be_created:void 0,sdg_alignment:[],environmental_benefits:"",social_impact_description:"",challenges_faced:"",specific_assistance_needed:"",how_did_you_hear:"",additional_comments:"",completed:!1}),x=(e,t)=>{h(a=>({...a,[e]:t}))},f=(e,t)=>{h(a=>{let s=a[e]||[];return s.includes(t)?{...a,[e]:s.filter(e=>e!==t)}:{...a,[e]:[...s,t]}})},j=async(e=!1)=>{l(!0),d(null);try{let a={...g,completed:e};await c.f$.save(a),e&&t()}catch(e){d(e.message||"Failed to save questionnaire")}finally{l(!1)}},b=async()=>{await j(!1),a<u.length&&n(a+1)},v=async()=>{await j(!0)};return e?s.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,s.jsxs)("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[s.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-75 transition-opacity"}),(0,s.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-3xl sm:w-full",children:[(0,s.jsxs)("div",{className:"bg-jasper-navy px-6 py-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[s.jsx("h2",{className:"text-xl font-semibold text-white",children:"Client Intake Questionnaire"}),s.jsx("p",{className:"text-sm text-gray-300 mt-1",children:"Help us understand your needs better"})]}),s.jsx("div",{className:"flex items-center space-x-2",children:(0,s.jsxs)("span",{className:"text-sm text-gray-300",children:["Step ",a," of ",u.length]})})]}),(0,s.jsxs)("div",{className:"mt-4",children:[s.jsx("div",{className:"flex space-x-2",children:u.map(e=>s.jsx("div",{className:`flex-1 h-2 rounded-full transition-colors ${e.id<=a?"bg-jasper-emerald":"bg-gray-600"}`},e.id))}),s.jsx("p",{className:"text-white mt-2 font-medium",children:u[a-1].title}),s.jsx("p",{className:"text-gray-300 text-sm",children:u[a-1].description})]})]}),(0,s.jsxs)("div",{className:"px-6 py-6 max-h-[60vh] overflow-y-auto",children:[o&&s.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:o}),1===a&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Description"}),s.jsx("textarea",{value:g.company_description||"",onChange:e=>x("company_description",e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-jasper-emerald focus:border-transparent",placeholder:"Brief description of your company and its main activities..."})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Years in Operation"}),s.jsx("input",{type:"number",value:g.years_in_operation||"",onChange:e=>x("years_in_operation",e.target.value?parseInt(e.target.value):void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-jasper-emerald focus:border-transparent",placeholder:"e.g. 5"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Number of Employees"}),(0,s.jsxs)("select",{value:g.employee_count||"",onChange:e=>x("employee_count",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-jasper-emerald focus:border-transparent",children:[s.jsx("option",{value:"",children:"Select range"}),s.jsx("option",{value:"1-10",children:"1-10"}),s.jsx("option",{value:"11-50",children:"11-50"}),s.jsx("option",{value:"51-200",children:"51-200"}),s.jsx("option",{value:"201-500",children:"201-500"}),s.jsx("option",{value:"500+",children:"500+"})]})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Annual Revenue Range (USD)"}),(0,s.jsxs)("select",{value:g.annual_revenue_range||"",onChange:e=>x("annual_revenue_range",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-jasper-emerald focus:border-transparent",children:[s.jsx("option",{value:"",children:"Select range"}),s.jsx("option",{value:"< $100K",children:"Less than $100,000"}),s.jsx("option",{value:"$100K - $500K",children:"$100,000 - $500,000"}),s.jsx("option",{value:"$500K - $1M",children:"$500,000 - $1 million"}),s.jsx("option",{value:"$1M - $5M",children:"$1 million - $5 million"}),s.jsx("option",{value:"$5M - $10M",children:"$5 million - $10 million"}),s.jsx("option",{value:"$10M - $50M",children:"$10 million - $50 million"}),s.jsx("option",{value:"> $50M",children:"More than $50 million"})]})]})]}),2===a&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Project Name"}),s.jsx("input",{type:"text",value:g.project_name||"",onChange:e=>x("project_name",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-jasper-emerald focus:border-transparent",placeholder:"e.g. Solar Farm Development Phase 1"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Project Description"}),s.jsx("textarea",{value:g.project_description||"",onChange:e=>x("project_description",e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-jasper-emerald focus:border-transparent",placeholder:"Describe the project scope, objectives, and expected outcomes..."})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Project Location"}),s.jsx("input",{type:"text",value:g.project_location||"",onChange:e=>x("project_location",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-jasper-emerald focus:border-transparent",placeholder:"e.g. Gauteng, South Africa"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estimated Project Value (USD)"}),s.jsx("input",{type:"number",value:g.project_value_estimate||"",onChange:e=>x("project_value_estimate",e.target.value?parseInt(e.target.value):void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-jasper-emerald focus:border-transparent",placeholder:"e.g. 5000000"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Project Timeline"}),(0,s.jsxs)("select",{value:g.project_timeline||"",onChange:e=>x("project_timeline",e.target.value||void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-jasper-emerald focus:border-transparent",children:[s.jsx("option",{value:"",children:"Select timeline"}),s.jsx("option",{value:"urgent",children:"Urgent (less than 1 month)"}),s.jsx("option",{value:"short",children:"Short (1-3 months)"}),s.jsx("option",{value:"medium",children:"Medium (3-6 months)"}),s.jsx("option",{value:"long",children:"Long (6-12 months)"}),s.jsx("option",{value:"flexible",children:"Flexible (no specific timeline)"})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Project Readiness"}),(0,s.jsxs)("select",{value:g.project_readiness||"",onChange:e=>x("project_readiness",e.target.value||void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-jasper-emerald focus:border-transparent",children:[s.jsx("option",{value:"",children:"Select readiness level"}),s.jsx("option",{value:"concept",children:"Concept - Just an idea"}),s.jsx("option",{value:"feasibility",children:"Feasibility - Doing feasibility studies"}),s.jsx("option",{value:"planning",children:"Planning - Detailed planning stage"}),s.jsx("option",{value:"ready_for_funding",children:"Ready for Funding - Ready to approach funders"}),s.jsx("option",{value:"implementation",children:"Implementation - Already implementing"})]})]})]})]}),3===a&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Funding Status"}),(0,s.jsxs)("select",{value:g.funding_status||"",onChange:e=>x("funding_status",e.target.value||void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-jasper-emerald focus:border-transparent",children:[s.jsx("option",{value:"",children:"Select status"}),s.jsx("option",{value:"self_funded",children:"Self-funded"}),s.jsx("option",{value:"seeking_funding",children:"Seeking funding"}),s.jsx("option",{value:"partially_funded",children:"Partially funded"}),s.jsx("option",{value:"fully_funded",children:"Fully funded"}),s.jsx("option",{value:"not_applicable",children:"Not applicable"})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Funding Amount Required (USD)"}),s.jsx("input",{type:"number",value:g.funding_amount_required||"",onChange:e=>x("funding_amount_required",e.target.value?parseInt(e.target.value):void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-jasper-emerald focus:border-transparent",placeholder:"e.g. 2000000"})]})]}),s.jsx("div",{children:(0,s.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:g.dfi_experience||!1,onChange:e=>x("dfi_experience",e.target.checked),className:"w-4 h-4 text-jasper-emerald border-gray-300 rounded focus:ring-jasper-emerald"}),s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Has your company worked with Development Finance Institutions (DFIs) before?"})]})}),g.dfi_experience&&(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Previous DFI Partners (select all that apply)"}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:p.map(e=>(0,s.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:(g.previous_dfi_partners||[]).includes(e),onChange:()=>f("previous_dfi_partners",e),className:"w-4 h-4 text-jasper-emerald border-gray-300 rounded focus:ring-jasper-emerald"}),s.jsx("span",{className:"text-sm text-gray-700",children:e})]},e))})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preferred DFIs to Target (select all that apply)"}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:p.map(e=>(0,s.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:(g.preferred_dfis||[]).includes(e),onChange:()=>f("preferred_dfis",e),className:"w-4 h-4 text-jasper-emerald border-gray-300 rounded focus:ring-jasper-emerald"}),s.jsx("span",{className:"text-sm text-gray-700",children:e})]},e))})]})]}),4===a&&(0,s.jsxs)("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Please indicate which documents you currently have available. This helps us understand your readiness level and what support you may need."}),s.jsx("div",{className:"space-y-3",children:[{field:"has_business_plan",label:"Business Plan"},{field:"has_financial_statements",label:"Financial Statements (last 3 years)"},{field:"has_feasibility_study",label:"Feasibility Study"},{field:"has_environmental_assessment",label:"Environmental Impact Assessment"},{field:"has_legal_documentation",label:"Legal Documentation (incorporation, permits, etc.)"}].map(({field:e,label:t})=>(0,s.jsxs)("label",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors",children:[s.jsx("input",{type:"checkbox",checked:g[e]||!1,onChange:t=>x(e,t.target.checked),className:"w-5 h-5 text-jasper-emerald border-gray-300 rounded focus:ring-jasper-emerald"}),s.jsx("span",{className:"text-gray-700",children:t})]},e))}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Other Documents Available"}),s.jsx("textarea",{value:g.additional_documents||"",onChange:e=>x("additional_documents",e.target.value),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-jasper-emerald focus:border-transparent",placeholder:"List any other relevant documents you have..."})]})]}),5===a&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Jobs to be Created"}),s.jsx("input",{type:"number",value:g.jobs_to_be_created||"",onChange:e=>x("jobs_to_be_created",e.target.value?parseInt(e.target.value):void 0),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-jasper-emerald focus:border-transparent",placeholder:"Estimated number of jobs"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"UN Sustainable Development Goals Alignment (select all that apply)"}),s.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-48 overflow-y-auto p-2 bg-gray-50 rounded-lg",children:m.map(e=>(0,s.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:(g.sdg_alignment||[]).includes(e.value),onChange:()=>f("sdg_alignment",e.value),className:"w-4 h-4 text-jasper-emerald border-gray-300 rounded focus:ring-jasper-emerald"}),s.jsx("span",{className:"text-sm text-gray-700",children:e.label})]},e.value))})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Environmental Benefits"}),s.jsx("textarea",{value:g.environmental_benefits||"",onChange:e=>x("environmental_benefits",e.target.value),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-jasper-emerald focus:border-transparent",placeholder:"Describe any environmental benefits of your project..."})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Social Impact Description"}),s.jsx("textarea",{value:g.social_impact_description||"",onChange:e=>x("social_impact_description",e.target.value),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-jasper-emerald focus:border-transparent",placeholder:"Describe the social impact of your project..."})]})]}),6===a&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Main Challenges Faced"}),s.jsx("textarea",{value:g.challenges_faced||"",onChange:e=>x("challenges_faced",e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-jasper-emerald focus:border-transparent",placeholder:"What are the main challenges you're currently facing?"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Specific Assistance Needed"}),s.jsx("textarea",{value:g.specific_assistance_needed||"",onChange:e=>x("specific_assistance_needed",e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-jasper-emerald focus:border-transparent",placeholder:"What specific assistance do you need from JASPER?"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"How Did You Hear About Us?"}),(0,s.jsxs)("select",{value:g.how_did_you_hear||"",onChange:e=>x("how_did_you_hear",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-jasper-emerald focus:border-transparent",children:[s.jsx("option",{value:"",children:"Select an option"}),s.jsx("option",{value:"website",children:"Website"}),s.jsx("option",{value:"referral",children:"Referral from a contact"}),s.jsx("option",{value:"linkedin",children:"LinkedIn"}),s.jsx("option",{value:"conference",children:"Conference/Event"}),s.jsx("option",{value:"search",children:"Search engine"}),s.jsx("option",{value:"other",children:"Other"})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Additional Comments"}),s.jsx("textarea",{value:g.additional_comments||"",onChange:e=>x("additional_comments",e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-jasper-emerald focus:border-transparent",placeholder:"Any other information you'd like to share..."})]})]})]}),(0,s.jsxs)("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-between items-center",children:[s.jsx("div",{children:a>1&&s.jsx("button",{onClick:()=>{a>1&&n(a-1)},disabled:i,className:"px-4 py-2 text-gray-600 hover:text-gray-800 font-medium transition-colors",children:"Previous"})}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[s.jsx("button",{onClick:()=>j(!1),disabled:i,className:"px-4 py-2 text-jasper-emerald hover:text-jasper-emerald/80 font-medium transition-colors",children:i?"Saving...":"Save Progress"}),a<u.length?s.jsx("button",{onClick:b,disabled:i,className:"px-6 py-2 bg-jasper-emerald text-white rounded-lg hover:bg-jasper-emerald/90 font-medium transition-colors disabled:opacity-50",children:i?"Saving...":"Next"}):s.jsx("button",{onClick:v,disabled:i,className:"px-6 py-2 bg-jasper-emerald text-white rounded-lg hover:bg-jasper-emerald/90 font-medium transition-colors disabled:opacity-50",children:i?"Submitting...":"Submit Questionnaire"})]})]})]})]})}):null}let h=["/login","/intake"];function x({children:e}){let t=(0,n.usePathname)(),{isLoading:a,isAuthenticated:i}=(0,l.a)(),o=h.some(e=>t===e||t.startsWith(e)),[c,u]=(0,r.useState)(!1),[m,p]=(0,r.useState)(!1);return o?s.jsx(s.Fragment,{children:e}):a?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-surface-secondary",children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-jasper-emerald mx-auto mb-4"}),s.jsx("p",{className:"text-jasper-slate",children:"Loading..."})]})}):i?(0,s.jsxs)("div",{className:"flex min-h-screen",children:[s.jsx(d.Y,{}),s.jsx("main",{className:"flex-1 ml-0 lg:ml-64 transition-all duration-300 pt-14 lg:pt-0",children:e}),s.jsx(g,{isOpen:c,onComplete:()=>{u(!1)}})]}):s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-surface-secondary",children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-jasper-emerald mx-auto mb-4"}),s.jsx("p",{className:"text-jasper-slate",children:"Redirecting to login..."})]})})}function f({children:e}){return s.jsx(o.f,{children:s.jsx(i.QueryProvider,{children:s.jsx(l.AuthProvider,{children:s.jsx(x,{children:e})})})})}},7676:(e,t,a)=>{"use strict";a.d(t,{Y:()=>S});var s=a(326),r=a(434),n=a(6226),i=a(5047),l=a(7577),o=a(4319),d=a(5265),c=a(4061),u=a(617),m=a(6283),p=a(8378),g=a(3062),h=a(9635),x=a(1810),f=a(9183),j=a(1890),b=a(748),v=a(4019),y=a(1223),_=a(8853);let w=[{name:"Dashboard",href:"/",icon:o.Z},{name:"Projects",href:"/projects",icon:d.Z},{name:"Clients",href:"/clients",icon:c.Z},{name:"Messages",href:"/messages",icon:u.Z},{name:"Invoices",href:"/invoices",icon:m.Z}],N=[{name:"Settings",href:"/settings",icon:p.Z},{name:"Help",href:"/help",icon:g.Z}];function S(){let e=(0,i.usePathname)(),[t,a]=(0,l.useState)(!1),[o,d]=(0,l.useState)(!1),{user:c,logout:u}=(0,_.a)(),m=(0,s.jsxs)("div",{className:"flex flex-col h-full",children:[s.jsx("div",{className:"flex items-center h-16 px-6 border-b border-border",children:(0,s.jsxs)(r.default,{href:"/",className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 relative flex-shrink-0",children:s.jsx(n.default,{src:"/images/jasper-icon.png",alt:"JASPER",fill:!0,className:"object-contain",priority:!0})}),!t&&(0,s.jsxs)("div",{className:"flex flex-col",children:[s.jsx("span",{className:"font-bold text-jasper-navy text-lg leading-tight tracking-tight",children:"JASPER"}),s.jsx("span",{className:"text-[10px] text-jasper-slate -mt-0.5 uppercase tracking-wider",children:"Financial Architecture"})]})]})}),s.jsx("nav",{className:"flex-1 px-3 py-4 space-y-1 overflow-y-auto",children:w.map(a=>{let n=e===a.href||"/"!==a.href&&e.startsWith(a.href);return(0,s.jsxs)(r.default,{href:a.href,className:(0,y.cn)("nav-item",n&&"nav-item-active"),title:t?a.name:void 0,children:[s.jsx(a.icon,{className:"w-5 h-5 flex-shrink-0"}),!t&&s.jsx("span",{children:a.name})]},a.name)})}),(0,s.jsxs)("div",{className:"px-3 py-4 border-t border-border space-y-1",children:[c&&!t&&s.jsx("div",{className:"px-3 py-2 mb-2",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-jasper-emerald/10 flex items-center justify-center",children:s.jsx(h.Z,{className:"w-4 h-4 text-jasper-emerald"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("p",{className:"text-sm font-medium text-jasper-carbon truncate",children:[c.first_name," ",c.last_name]}),s.jsx("p",{className:"text-xs text-jasper-slate truncate capitalize",children:c.role.replace("_"," ")})]})]})}),N.map(a=>{let n=e===a.href;return(0,s.jsxs)(r.default,{href:a.href,className:(0,y.cn)("nav-item",n&&"nav-item-active"),title:t?a.name:void 0,children:[s.jsx(a.icon,{className:"w-5 h-5 flex-shrink-0"}),!t&&s.jsx("span",{children:a.name})]},a.name)}),(0,s.jsxs)("button",{onClick:u,className:"nav-item w-full text-left text-status-error hover:bg-status-error/10 hover:text-status-error",title:t?"Logout":void 0,children:[s.jsx(x.Z,{className:"w-5 h-5 flex-shrink-0"}),!t&&s.jsx("span",{children:"Logout"})]})]}),s.jsx("button",{onClick:()=>a(!t),className:"absolute -right-3 top-20 w-6 h-6 bg-surface-primary border border-border rounded-full items-center justify-center shadow-sm hover:bg-surface-secondary transition-colors hidden lg:flex",children:t?s.jsx(f.Z,{className:"w-4 h-4 text-jasper-slate"}):s.jsx(j.Z,{className:"w-4 h-4 text-jasper-slate"})})]});return(0,s.jsxs)(s.Fragment,{children:[s.jsx("button",{onClick:()=>d(!0),className:"fixed top-4 left-4 z-50 lg:hidden p-2 bg-surface-primary border border-border rounded-lg shadow-sm hover:bg-surface-secondary transition-colors","aria-label":"Open menu",children:s.jsx(b.Z,{className:"w-5 h-5 text-jasper-carbon"})}),o&&s.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 lg:hidden",onClick:()=>d(!1)}),(0,s.jsxs)("aside",{className:(0,y.cn)("fixed left-0 top-0 z-50 h-screen w-64 bg-surface-primary border-r border-border transition-transform duration-300 lg:hidden",o?"translate-x-0":"-translate-x-full"),children:[s.jsx("button",{onClick:()=>d(!1),className:"absolute top-4 right-4 p-2 hover:bg-surface-secondary rounded-lg transition-colors","aria-label":"Close menu",children:s.jsx(v.Z,{className:"w-5 h-5 text-jasper-slate"})}),m]}),s.jsx("aside",{className:(0,y.cn)("fixed left-0 top-0 z-40 h-screen bg-surface-primary border-r border-border transition-all duration-300 hidden lg:block",t?"w-20":"w-64"),children:m})]})}},2017:(e,t,a)=>{"use strict";a.d(t,{z2:()=>h,cv:()=>c,Tg:()=>p,iR:()=>m,Mp:()=>x,qx:()=>u,f$:()=>g});let s={default:{maxRequests:60,windowMs:6e4,retryAfterMs:5e3},auth:{maxRequests:5,windowMs:6e4,retryAfterMs:1e4},upload:{maxRequests:10,windowMs:6e4,retryAfterMs:1e4},search:{maxRequests:30,windowMs:6e4,retryAfterMs:3e3}},r=new Map;function n(e){return e.includes("/auth/")?"auth":e.includes("/upload")?"upload":e.includes("/search")?"search":"default"}function i(e){let t=r.get(e);return t||(t={count:0,windowStart:Date.now(),retryAfter:null},r.set(e,t)),t}class l extends Error{constructor(e,t){super(e),this.name="RateLimitError",this.retryAfterMs=t}}let o="/api/v1";async function d(e,t){if(!function(e){let t=n(e),a=s[t],r=i(t),l=Date.now();return(!r.retryAfter||!(l<r.retryAfter))&&(l-r.windowStart>=a.windowMs&&(r.count=0,r.windowStart=l,r.retryAfter=null),r.count<a.maxRequests)}(e))throw new l("Too many requests. Please wait a moment before trying again.",5e3);let a=t?.method||"GET",r={"Content-Type":"application/json",...t?.headers};["GET","HEAD","OPTIONS"].includes(a.toUpperCase())||Object.assign(r,{}),function(e){let t=i(n(e));t.count++}(e);let d=await fetch(`${o}${e}`,{headers:r,...t});if(!d.ok){if(429===d.status){let t=function(e,t){let a=n(e),r=s[a],l=i(a),o=r.retryAfterMs;if(t){let e=parseInt(t,10);isNaN(e)||(o=1e3*e)}return l.retryAfter=Date.now()+o,o}(e,d.headers.get("Retry-After"));throw new l(`Too many requests. Please wait ${Math.ceil(t/1e3)} seconds.`,t)}401===d.status&&(localStorage.removeItem("admin_token"),localStorage.removeItem("admin_user"));let t=await d.json().catch(()=>({message:"Request failed"}));throw Error(t.detail||t.message||"Request failed")}return d.json()}let c={list:e=>{let t=new URLSearchParams;return e?.page&&t.set("page",e.page.toString()),e?.page_size&&t.set("page_size",e.page_size.toString()),e?.status&&t.set("status",e.status),d(`/clients/?${t}`)},get:e=>d(`/clients/${e}`),create:e=>d("/clients/",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>d(`/clients/${e}`,{method:"PATCH",body:JSON.stringify(t)}),sendInvite:(e,t)=>d(`/clients/${e}/send-invite`,{method:"POST",body:JSON.stringify({contact_id:t})}),getContacts:e=>d(`/clients/${e}/contacts`)},u={list:e=>{let t=new URLSearchParams;return e?.page&&t.set("page",e.page.toString()),e?.page_size&&t.set("page_size",e.page_size.toString()),e?.company_id&&t.set("company_id",e.company_id.toString()),e?.stage&&t.set("stage",e.stage),d(`/projects/?${t}`)},get:e=>d(`/projects/${e}`),create:e=>d("/projects/",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>d(`/projects/${e}`,{method:"PATCH",body:JSON.stringify(t)}),getMilestones:e=>d(`/projects/${e}/milestones`),getTimeline:e=>d(`/projects/${e}/timeline`),updateMilestone:(e,t,a)=>d(`/projects/${e}/milestones/${t}`,{method:"PATCH",body:JSON.stringify(a)}),advanceStage:e=>d(`/projects/${e}/advance-stage`,{method:"POST"})},m={list:e=>{let t=new URLSearchParams;return e?.page&&t.set("page",e.page.toString()),e?.page_size&&t.set("page_size",e.page_size.toString()),e?.company_id&&t.set("company_id",e.company_id.toString()),e?.status&&t.set("status",e.status),d(`/invoices/?${t}`)},get:e=>d(`/invoices/${e}`),create:e=>d("/invoices/",{method:"POST",body:JSON.stringify(e)}),markPaid:(e,t)=>d(`/invoices/${e}/mark-paid`,{method:"POST",body:JSON.stringify(t)})},p={listByProject:e=>d(`/documents/project/${e}`),upload:async e=>{let t=await fetch("/api/v1/documents/upload",{method:"POST",headers:{},body:e});if(!t.ok)throw Error((await t.json().catch(()=>({detail:"Upload failed"}))).detail||"Upload failed");return t.json()},delete:e=>d(`/documents/${e}`,{method:"DELETE"}),download:e=>`/api/v1/documents/${e}/download`},g={getStatus:()=>d("/questionnaire/status"),get:()=>d("/questionnaire/"),save:e=>d("/questionnaire/",{method:"POST",body:JSON.stringify(e)})},h={login:async(e,t)=>{let a=await fetch(`${o}/admin/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});if(!a.ok)throw Error((await a.json().catch(()=>({detail:"Login failed"}))).detail||"Invalid credentials");let s=await a.json();return localStorage.setItem("admin_token",s.access_token),localStorage.setItem("admin_user",JSON.stringify(s.user)),s},googleLogin:async e=>{let t=await fetch(`${o}/admin/auth/google`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({credential:e})});if(!t.ok)throw Error((await t.json().catch(()=>({detail:"Google login failed"}))).detail||"Google authentication failed");let a=await t.json();return localStorage.setItem("admin_token",a.access_token),localStorage.setItem("admin_user",JSON.stringify(a.user)),a},getGoogleClientId:async()=>{let e=await fetch(`${o}/admin/auth/google/client-id`);if(!e.ok)throw Error("Google OAuth not configured");return(await e.json()).client_id},linkedinLogin:async(e,t)=>{let a=await fetch(`${o}/admin/auth/linkedin`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({provider:"linkedin",code:e,redirect_uri:t})});if(!a.ok){let e=await a.json().catch(()=>({detail:"LinkedIn login failed"}));throw Error((e.error?`${e.detail}: ${e.error}`:e.detail)||"LinkedIn authentication failed")}let s=await a.json();return localStorage.setItem("admin_token",s.access_token),localStorage.setItem("admin_user",JSON.stringify(s.user)),s},getLinkedInConfig:async()=>{let e=await fetch(`${o}/admin/auth/linkedin/client-id`);if(!e.ok)throw Error("LinkedIn OAuth not configured");return e.json()},logout:()=>{localStorage.removeItem("admin_token"),localStorage.removeItem("admin_user"),r.clear(),window.location.href="/login"},getCurrentUser:()=>null,isAuthenticated:()=>!1,getMe:()=>d("/admin/auth/me"),changePassword:(e,t)=>d("/admin/auth/change-password",{method:"POST",body:JSON.stringify({current_password:e,new_password:t})})},x={send:(e,t="Admin",a=1)=>d(`/messages/send?sender_name=${encodeURIComponent(t)}&sender_id=${a}`,{method:"POST",body:JSON.stringify(e)}),getThreads:e=>{let t=e?`?company_id=${e}`:"";return d(`/messages/threads${t}`)},getCompanyMessages:(e,t,a=1)=>{let s=new URLSearchParams;return s.set("page",a.toString()),t&&s.set("project_id",t.toString()),d(`/messages/company/${e}?${s}`)},getMessage:e=>d(`/messages/${e}`),getReplies:e=>d(`/messages/${e}/replies`),markAsRead:e=>d(`/messages/${e}/read`,{method:"PATCH"}),markAllAsRead:e=>d(`/messages/company/${e}/read-all`,{method:"PATCH"})}},8853:(e,t,a)=>{"use strict";a.d(t,{AuthProvider:()=>o,a:()=>d});var s=a(326),r=a(7577),n=a(5047),i=a(2017);let l=(0,r.createContext)(void 0);function o({children:e}){let[t,a]=(0,r.useState)(null),[o,d]=(0,r.useState)(!0),c=(0,n.useRouter)();(0,n.usePathname)();let u=(0,r.useRef)(!1);(0,r.useRef)(!1);let m=async(e,t)=>{u.current=!0;try{let s=await i.z2.login(e,t);a(s.user),await new Promise(e=>setTimeout(e,150)),c.push("/")}finally{setTimeout(()=>{u.current=!1},2e3)}},p=async e=>{u.current=!0;try{let t=await i.z2.googleLogin(e);a(t.user),await new Promise(e=>setTimeout(e,150)),c.push("/")}finally{setTimeout(()=>{u.current=!1},2e3)}},g=async(e,t)=>{u.current=!0;try{let s=await i.z2.linkedinLogin(e,t);a(s.user),await new Promise(e=>setTimeout(e,150)),c.push("/")}finally{setTimeout(()=>{u.current=!1},2e3)}};return s.jsx(l.Provider,{value:{user:t,isLoading:o,isAuthenticated:!!t,login:m,googleLogin:p,linkedinLogin:g,logout:()=>{a(null),i.z2.logout()}},children:e})}function d(){let e=(0,r.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},1493:(e,t,a)=>{"use strict";a.d(t,{QueryProvider:()=>l});var s=a(326),r=a(3244),n=a(4976),i=a(7577);function l({children:e}){let[t]=(0,i.useState)(()=>new r.S({defaultOptions:{queries:{staleTime:6e4,gcTime:3e5,refetchOnWindowFocus:!1,retry:1}}}));return s.jsx(n.aH,{client:t,children:e})}},3371:(e,t,a)=>{"use strict";a.d(t,{F:()=>l,f:()=>i});var s=a(326),r=a(7577);let n=(0,r.createContext)(void 0);function i({children:e}){let[t,a]=(0,r.useState)("system"),[i,l]=(0,r.useState)("light"),[o,d]=(0,r.useState)(!1),c=()=>"light",u=e=>{let t=document.documentElement,a="system"===e?c():e;t.classList.remove("light","dark"),t.classList.add(a),l(a)};return o?s.jsx(n.Provider,{value:{theme:t,resolvedTheme:i,setTheme:e=>{a(e),localStorage.setItem("jasper-theme",e),u(e)}},children:e}):null}function l(){let e=(0,r.useContext)(n);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}},1223:(e,t,a)=>{"use strict";a.d(t,{IS:()=>u,Qm:()=>m,cn:()=>n,im:()=>c,p6:()=>l,ul:()=>o,xG:()=>i,z2:()=>d});var s=a(1135),r=a(1009);function n(...e){return(0,r.m6)((0,s.W)(e))}function i(e,t="USD"){return new Intl.NumberFormat("en-US",{style:"currency",currency:t,minimumFractionDigits:0,maximumFractionDigits:0}).format(e/100)}function l(e){let t=new Date(e);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(t)}function o(e){return({inquiry:"stage-inquiry",proposal:"stage-proposal",negotiation:"stage-negotiation",contracted:"stage-contracted",discovery:"stage-contracted",in_progress:"stage-in-progress",review:"stage-in-progress",revision:"stage-in-progress",completed:"stage-completed",on_hold:"badge-warning",cancelled:"badge-error"})[e]||"badge-neutral"}function d(e){return({draft:"badge-neutral",sent:"badge-info",viewed:"badge-info",paid:"badge-success",overdue:"badge-error",cancelled:"badge-neutral"})[e]||"badge-neutral"}function c(e){return e.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}function u(e){return({starter:"Starter",growth:"Growth",scale:"Scale",enterprise:"Enterprise",custom:"Custom"})[e]||e}function m(e){return e.split(" ").map(e=>e.charAt(0).toUpperCase()).slice(0,2).join("")}},5280:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i,metadata:()=>n});var s=a(9510);a(5023);let r=(0,a(8570).createProxy)(String.raw`/Users/mac/Downloads/jasper-financial-architecture/jasper-portal-frontend/src/components/layout/AuthenticatedLayout.tsx#AuthenticatedLayout`),n={title:"JASPER Client Portal",description:"Professional client management system for JASPER Financial Architecture"};function i({children:e}){return s.jsx("html",{lang:"en",children:s.jsx("body",{className:"antialiased",children:s.jsx(r,{children:e})})})}},5023:()=>{}};